(this.webpackJsonpproto=this.webpackJsonpproto||[]).push([[0],{1:function(e,t,a){e.exports={wrapper:"DealItem_wrapper__2f1kL",wrapperCaption:"DealItem_wrapperCaption__2aqdb",image:"DealItem_image__qHEgN",blur:"DealItem_blur__2rcJ3",blurWrapper:"DealItem_blurWrapper__3V4sF",blurImage:"DealItem_blurImage__2_mJD",location:"DealItem_location__2xFm8",caption:"DealItem_caption__3BgWJ",contentList:"DealItem_contentList__3qBLD",content:"DealItem_content__2ixEz",activeContent:"DealItem_activeContent__2lrap",contentWrap:"DealItem_contentWrap__2G3kI",left:"DealItem_left__1hudx",right:"DealItem_right__16qA3",dayNames:"DealItem_dayNames__3cJop",rating:"DealItem_rating__1PBG_",detailsButton:"DealItem_detailsButton__2M8yy",moreOffers:"DealItem_moreOffers__1Jeot",details:"DealItem_details__3qVvB",detailsDate:"DealItem_detailsDate__2RtCY",plane:"DealItem_plane__l4iqa",inboundPlane:"DealItem_inboundPlane__1uPVt",detailsTime:"DealItem_detailsTime__2YB-h",detailsLanding:"DealItem_detailsLanding__3XEKC",detailsHour:"DealItem_detailsHour__3mExq",line:"DealItem_line__2b6cN",accomodation:"DealItem_accomodation__3BT55",accomodationContent:"DealItem_accomodationContent__3M7KM",accomodationImage:"DealItem_accomodationImage__Za8mN",accomodationRating:"DealItem_accomodationRating__3XNFn",hotelName:"DealItem_hotelName__37NYn",reviewScore:"DealItem_reviewScore__2nc_o",makeReservation:"DealItem_makeReservation__1mAzU",orangeStar:"DealItem_orangeStar__3GdzK",greyStar:"DealItem_greyStar__5jSkI"}},14:function(e,t,a){e.exports={chipWrap:"style_chipWrap__Exnta",chipContent:"style_chipContent__3Ecys",chip:"style_chip__110tV",chipLabel:"style_chipLabel__3rZ7S"}},16:function(e,t,a){e.exports={formWrap:"Filter_formWrap__ENCfg",form:"Filter_form__1HTVz",results:"Filter_results__32iM2",inputWrap:"Filter_inputWrap__1SQfc",button:"Filter_button__1B6jc"}},17:function(e,t,a){e.exports={App:"App_App__3bDxu",title:"App_title__28Y6X"}},18:function(e,t,a){e.exports={loading:"styles_loading__1kKjp",loadingMobile:"styles_loadingMobile__3IX27",loadingDesktop:"styles_loadingDesktop__2MA_8"}},2:function(e,t,a){e.exports={wrapper:"style_wrapper__10wTO",label:"style_label__2IG4i",activeLabel:"style_activeLabel__FfH7Y",optionList:"style_optionList__XaP8G",optionListWrapper:"style_optionListWrapper__xg1g-",optionListShadow:"style_optionListShadow__2rvTj",optionListItem:"style_optionListItem__IVAAf",optionListItemActive:"style_optionListItemActive__3ae_3",optionListHeader:"style_optionListHeader__38sW0",optionListButtons:"style_optionListButtons__1-e2n",starsWrap:"style_starsWrap__3aS_0",active:"style_active__3tt3Q",button:"style_button__2rVAA",buttonOutline:"style_buttonOutline__23DHS",square:"style_square__1O0wL",searchInput:"style_searchInput__1QPjM",yearsSelect:"style_yearsSelect__38k-T",yearsWrap:"style_yearsWrap__3gVLd",yearList:"style_yearList__1grYj",yearItem:"style_yearItem__2kW6w",right:"style_right__2jxhW",left:"style_left__1ltCn"}},22:function(e,t,a){e.exports={information:"DealsList_information__3YZz8",list:"DealsList_list__1I6DG"}},28:function(e,t,a){e.exports=a(40)},33:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(25),i=a.n(r),c=(a(33),a(12)),s=a(10),o=a(3),u=a(4),m=a(8),d=a.n(m),f=a(6),h=a(17),p=a.n(h),v=a(16),_=a.n(v),b=a(2),E=a.n(b);function g(e,t){return void 0!==t?window.Translator.trans(e,t):window.Translator.trans(e)}var N=function(e){var t=e.position,a=e.label,r=(e.options,e.handleChange),i=(e.defaultValue,e.showSearch),c=(e.activeFirst,e.value),s=e.showVariants,m=e.setShowVariants,d=Object(n.useState)(c),f=Object(u.a)(d,2),h=f[0],p=f[1],v=Object(n.useState)(""),_=Object(u.a)(v,2),b=_[0],N=_[1];Object(n.useEffect)((function(){p(c)}),[c]);var y=Object(n.useRef)(null);return l.a.createElement("div",{className:E.a.wrapper},l.a.createElement("div",{ref:y,className:"".concat(E.a.label," ").concat(s||c.filter((function(e){return e.active})).length>0?E.a.activeLabel:null),onClick:function(){y.current.scrollIntoView({block:"center",behavior:"smooth"}),m(!s)}},a),s?l.a.createElement("div",{className:"".concat(E.a.optionListWrapper," ").concat("right"===t?E.a.right:"")},l.a.createElement("div",{className:E.a.optionListHeader},l.a.createElement("span",null,a)," ",l.a.createElement("span",{onClick:function(){r(h.map((function(e){return Object(o.a)({},e,{active:!1})}))),p(h.map((function(e){return Object(o.a)({},e,{active:!1})}))),m(!1)}},g("deals.filter.clearAll"))),i?l.a.createElement("input",{className:E.a.searchInput,type:"text",value:b,onChange:function(e){return N(e.target.value)},placeholder:"Search and select cities for filter"}):null,l.a.createElement("ul",{className:E.a.optionList},h.filter((function(e){return e.label.toLowerCase().includes(b.toLowerCase())})).map((function(e){var t,a=e.value,n=e.label,r=e.active;return l.a.createElement("li",{key:a,className:E.a.optionListItem,onClick:(t=a,function(){p((function(e){return e.map((function(e){return e.value!==t?e:Object(o.a)({},e,{active:!e.active})}))}))})},r?l.a.createElement("div",{className:E.a.optionListItemActive},l.a.createElement("i",{className:"fa fa-check-square","aria-hidden":"true"})):l.a.createElement("div",{className:E.a.square}),l.a.createElement("span",{className:r?E.a.active:""},n))}))),l.a.createElement("div",{className:E.a.optionListButtons},l.a.createElement("button",{className:"".concat(E.a.button," ").concat(E.a.buttonOutline),onClick:function(){return m(!1)}},g("deals.filter.cancel")),l.a.createElement("button",{className:E.a.button,onClick:function(){r(h),m(!1)}},g("deals.filter.done"))),l.a.createElement("div",{className:E.a.optionListShadow,onClick:function(){return m(!1)}})):null)},y=function(e){e.position;var t=e.label,a=e.handleChange,r=(e.defaultValue,e.showSearch,e.value),i=e.showVariants,c=e.setShowVariants,s=Object(n.useState)(r),m=Object(u.a)(s,2),d=m[0],f=m[1];Object(n.useEffect)((function(){f(r)}),[r]);var h=Object(n.useRef)(null);return l.a.createElement("div",{className:E.a.wrapper},l.a.createElement("div",{ref:h,className:"".concat(E.a.label," ").concat(i||r.filter((function(e){return e.active})).length>0?E.a.activeLabel:null),onClick:function(){h.current.scrollIntoView({block:"center",behavior:"smooth"}),c(!i)}},t),i?l.a.createElement("div",{className:E.a.optionListWrapper},l.a.createElement("div",{className:E.a.optionListHeader},l.a.createElement("span",null,t)," ",l.a.createElement("span",{onClick:function(){a(d.map((function(e){return Object(o.a)({},e,{active:!1})}))),f(d.map((function(e){return Object(o.a)({},e,{active:!1})}))),c(!1)}},g("deals.filter.clearAll"))),l.a.createElement("ul",{className:E.a.optionList},d.map((function(e){var t,a=e.value,n=e.label,r=e.active;return l.a.createElement("li",{key:a,className:E.a.optionListItem,onClick:(t=a,function(){f((function(e){return e.map((function(e){return e.value!==t?e:Object(o.a)({},e,{active:!e.active})}))}))})},r?l.a.createElement("div",{className:E.a.optionListItemActive},l.a.createElement("i",{className:"fa fa-check-square","aria-hidden":"true"})):l.a.createElement("div",{className:E.a.square}),l.a.createElement("span",{className:r?E.a.active:""},n))}))),l.a.createElement("div",{className:E.a.optionListButtons},l.a.createElement("button",{className:"".concat(E.a.button," ").concat(E.a.buttonOutline),onClick:function(){return c(!1)}},g("deals.filter.cancel")),l.a.createElement("button",{className:E.a.button,onClick:function(){a(d),c(!1)}},g("deals.filter.done"))),l.a.createElement("div",{className:E.a.optionListShadow,onClick:function(){return c(!1)}})):null)},w=function(e){e.position;var t=e.label,a=e.handleChange,r=(e.defaultValue,e.showSearch),i=(e.activeFirst,e.value),c=e.showVariants,s=e.setShowVariants,m=e.hash,d=e.initialRoute,h=e.handleFilterByCity,p=Object(n.useState)(i),v=Object(u.a)(p,2),_=v[0],b=v[1],N=Object(n.useState)(""),y=Object(u.a)(N,2),w=y[0],D=y[1],O=Object(f.f)();Object(n.useEffect)((function(){b(i)}),[i]);var j=Object(n.useRef)(null);return l.a.createElement("div",{className:E.a.wrapper},l.a.createElement("div",{ref:j,className:"".concat(E.a.label," ").concat(c||i.filter((function(e){return e.active})).length>0?E.a.activeLabel:null),onClick:function(){j.current.scrollIntoView({block:"center"}),s(!c)}},t),c?l.a.createElement("div",{className:E.a.optionListWrapper},l.a.createElement("div",{className:E.a.optionListHeader},l.a.createElement("span",null,t)," ",l.a.createElement("span",{onClick:function(){a(_.map((function(e){return Object(o.a)({},e,{active:!1})}))),b(_.map((function(e){return Object(o.a)({},e,{active:!1})}))),s(!1)}},g("deals.filter.clearAll"))),r?l.a.createElement("input",{className:E.a.searchInput,type:"text",value:w,onChange:function(e){return D(e.target.value)},placeholder:g("deals.filter.placeholderCities")}):null,l.a.createElement("ul",{className:E.a.optionList},_.filter((function(e){return e.label.toLowerCase().includes(w.toLowerCase())})).map((function(e){var t,a=e.value,n=e.label,r=e.active;return l.a.createElement("li",{key:a,className:E.a.optionListItem,onClick:(t=a,function(){b((function(e){return e.map((function(e){return e.value!==t?e:Object(o.a)({},e,{active:!e.active})}))}))})},r?l.a.createElement("div",{className:E.a.optionListItemActive},l.a.createElement("i",{className:"fa fa-check-square","aria-hidden":"true"})):l.a.createElement("div",{className:E.a.square}),l.a.createElement("span",{className:r?E.a.active:""},n))}))),l.a.createElement("div",{className:E.a.optionListButtons},l.a.createElement("button",{className:"".concat(E.a.button," ").concat(E.a.buttonOutline),onClick:function(){return s(!1)}},g("deals.filter.cancel")),l.a.createElement("button",{className:E.a.button,onClick:function(){if(s(!1),1===_.filter((function(e){return e.active})).length){var e=_.filter((function(e){return e.active}))[0];console.log(e),console.log(h),h(e.value)();var t="/"===d.slice(-1)?"".concat(d).concat(e.value).concat(m):"".concat(d,"/").concat(e.value).concat(m);return O.push(t),null}a(_)}},g("deals.filter.done"))),l.a.createElement("div",{className:E.a.optionListShadow,onClick:function(){return s(!1)}})):null)},D=function(e){var t=e.filters,a=e.setFilters,r=e.countDeals,i=e.hash,c=e.initialRoute,m=e.showCity,d=e.showLocationTheme,f=e.handleFilterByCity,h=Object(n.useRef)(null),p=function(e){return function(t){a((function(a){return Object(o.a)({},a,Object(s.a)({},e,t))}))}},v={cities:!1,airports:!1,themes:!1,hotelStars:!1,dates:!1,nights:!1,preferedVacation:!1,hotelRating:!1},b=Object(n.useState)(v),E=Object(u.a)(b,2),D=E[0],O=E[1],j=function(e){return function(t){O(Object(o.a)({},v,Object(s.a)({},e,t)))}};return Object(n.useEffect)((function(){function e(e){h.current&&!h.current.contains(e.target)&&O(v)}return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[v]),l.a.createElement("div",{className:_.a.formWrap,ref:h},l.a.createElement("form",{className:_.a.form,onSubmit:function(e){return e.preventDefault()}},l.a.createElement("div",{className:_.a.results},l.a.createElement("span",null,g("deals.filter.available")),l.a.createElement("span",null,r," ",g("deals.filter.results"))),l.a.createElement("div",{className:_.a.inputWrap},0!==t.cities.length&&m?l.a.createElement(w,{handleChange:p("cities"),label:g("deals.filter.cities"),value:t.cities,showSearch:!0,setShowVariants:j("cities"),showVariants:D.cities,initialRoute:c,hash:i,handleFilterByCity:f}):null,t.airports.length<2?null:l.a.createElement(N,{handleChange:p("airports"),label:g("deals.filter.airport"),value:t.airports,setShowVariants:j("airports"),showVariants:D.airports}),0!==t.themes.length&&d?l.a.createElement(N,{handleChange:p("themes"),label:g("deals.filter.locationTheme"),value:t.themes,setShowVariants:j("themes"),showVariants:D.themes}):null,l.a.createElement(N,{handleChange:p("hotelStars"),label:g("deals.filter.stars"),value:t.hotelStars,setShowVariants:j("hotelStars"),showVariants:D.hotelStars}),l.a.createElement(y,{handleChange:p("dates"),label:g("deals.filter.monthOfTheYear"),value:t.dates,setShowVariants:j("dates"),showVariants:D.dates}),l.a.createElement(N,{handleChange:p("nights"),label:g("deals.filter.nights"),value:t.nights,activeFirst:!0,setShowVariants:j("nights"),showVariants:D.nights}),l.a.createElement(N,{handleChange:p("preferedVacation"),label:g("deals.filter.when"),value:t.preferedVacation,setShowVariants:j("preferedVacation"),showVariants:D.preferedVacation,position:"right"}),l.a.createElement(N,{handleChange:p("hotelRating"),label:g("deals.filter.ratings"),value:t.hotelRating,position:"right",setShowVariants:j("hotelRating"),showVariants:D.hotelRating}))))},O=a(14),j=a.n(O),C=function(e){var t=e.list,a=e.show,n=e.chipLabel,r=e.handleDelete;return a?l.a.createElement("div",{className:j.a.chip},l.a.createElement("span",null,n),t.filter((function(e){return e.active})).map((function(e){var t=e.value,a=e.label;return l.a.createElement("div",{key:t,className:j.a.chipLabel,onClick:function(){return r(t)}},a," ",l.a.createElement("i",{className:"fa fa-times","aria-hidden":"true"}))}))):null},I=function(e){var t=e.filters,a=e.setFilters,n=(e.initialFilters,e.hash),r=e.initialRoute,i=e.resetFilters,c=t.nights,u=t.hotelRating,m=t.preferedVacation,d=t.hotelStars,h=t.cities,p=t.dates,v=t.themes,_=t.airports,b=Object(f.f)(),E=function(e){return function(t){a((function(a){if("from"===e)return Object(o.a)({},a,Object(s.a)({},e,{year:a.from.year,months:a.from.months.map((function(e){return e.value===t?Object(o.a)({},e,{active:!e.active}):e}))}));var l=a[e].map((function(e){return e.value===t?Object(o.a)({},e,{active:!e.active}):e}));if("cities"===e&&0===l.filter((function(e){return e.active})).length){var i="".concat(r).concat(n);b.push(i)}if("cities"===e&&1===l.filter((function(e){return e.active})).length){var c=l.filter((function(e){return e.active}))[0],u="/"===r.slice(-1)?"".concat(r).concat(c.value).concat(n):"".concat(r,"/").concat(c.value).concat(n);b.push(u)}return Object(o.a)({},a,Object(s.a)({},e,l))}))}},N=!1;for(var y in t)N=0!==t[y].filter((function(e){return e.active})).length||N;return l.a.createElement("div",{className:j.a.chipWrap},l.a.createElement("div",{className:j.a.chipContent},N?l.a.createElement("div",{className:j.a.chip},l.a.createElement("div",{className:j.a.chipLabel,onClick:function(){var e="".concat(r).concat(n);b.push(e),i()}},g("deals.chips.clearAll")," ",l.a.createElement("i",{className:"fa fa-times","aria-hidden":"true"}))):null,l.a.createElement(C,{chipLabel:"".concat(g("deals.chips.cities"),":"),list:h,show:0!==h.filter((function(e){return e.active})).length,handleDelete:E("cities")}),l.a.createElement(C,{chipLabel:"".concat(g("deals.chips.nights"),":"),list:c,show:0!==c.filter((function(e){return e.active})).length,handleDelete:E("nights")}),l.a.createElement(C,{chipLabel:"".concat(g("deals.chips.theme"),":"),list:v,show:0!==v.filter((function(e){return e.active})).length,handleDelete:E("themes")}),l.a.createElement(C,{chipLabel:"".concat(g("deals.chips.preferedVacation"),":"),list:m,show:0!==m.filter((function(e){return e.active})).length,handleDelete:E("preferedVacation")}),l.a.createElement(C,{chipLabel:"".concat(g("deals.chips.hotelStars"),":"),list:d,show:0!==d.filter((function(e){return e.active})).length,handleDelete:E("hotelStars")}),l.a.createElement(C,{chipLabel:"".concat(g("deals.chips.airports"),":"),list:_,show:0!==_.filter((function(e){return e.active})).length,handleDelete:E("airports")}),l.a.createElement(C,{chipLabel:"".concat(g("deals.chips.dates"),":"),list:p,show:0!==p.filter((function(e){return e.active})).length,handleDelete:E("dates")}),l.a.createElement(C,{chipLabel:"".concat(g("deals.chips.hotelRating"),":"),list:u,show:0!==u.filter((function(e){return e.active})).length,handleDelete:E("hotelRating")})))},L=a(1),S=a.n(L);function k(e,t){var a,n,l,r,i,c,s;switch(s=parseInt(Math.floor(e/1e3)),c=parseInt(Math.floor(s/60)),i=parseInt(Math.floor(c/60)),a=parseInt(Math.floor(i/24)),r=parseInt(s%60),l=parseInt(c%60),n=parseInt(i%24),t){case"s":return s;case"m":return c;case"h":return i;case"d":return a;default:return{d:a,h:n,m:l,s:r}}}var F={translatedMonths:[g("deals.months.January"),g("deals.months.February"),g("deals.months.March"),g("deals.months.April"),g("deals.months.May"),g("deals.months.June"),g("deals.months.July"),g("deals.months.August"),g("deals.months.September"),g("deals.months.October"),g("deals.months.November"),g("deals.months.December")],translatedDays:[g("deals.months.Sunday"),g("deals.months.Monday"),g("deals.months.Tuesday"),g("deals.months.Wednesday"),g("deals.months.Thursday"),g("deals.months.Friday"),g("deals.months.Saturday")]},V=function(e){var t=e.deal,a=Object(n.useState)(!1),r=Object(u.a)(a,2),i=r[0],c=r[1],s=t.hotelData,o=t.flightData,m=t.dealData;o||((o={}).default_inbound={},console.log(o,m.price));for(var d=o,f=(d.takeoff_date,d.takeoff_hour),h=d.landing_hour,p=(d.landing_date,d.travel_duration_format),v=d.default_inbound,_=d.nb_escales,b=d.city_from_airport_code,E=d.city_to_airport_code,N=(d.comp_logo,d.comp_path,o.default_inbound),y=(N.takeoff_date,N.takeoff_hour),w=N.landing_hour,D=(N.landing_date,N.travel_duration_format),O=N.city_from_airport_code,j=N.city_to_airport_code,C=(N.comp_logo,N.comp_path,m.outboundDate),I=m.inboundDate,L=m.price,V=s.rating,R=s.name,M=s.trustYouReviews,W=s.default_img,A=[],B=1;B<=5;B++)B<=V?A.push(l.a.createElement("div",{className:S.a.orangeStar,key:B},l.a.createElement("i",{className:"fa fa-star"}))):A.push(l.a.createElement("div",{className:S.a.greyStar,key:B},l.a.createElement("i",{className:"fa fa-star"})));var x=function(e){return new Date(+e[2],+e[1]-1,+e[0])},Y=x(C.split("/")),T=x(I.split("/")),q=k(T-Y,"d"),H=("".concat(Y.getDate(),". ").concat(F.translatedMonths[Y.getMonth()]," ").concat(Y.getFullYear()),"".concat(T.getDate(),". ").concat(F.translatedMonths[T.getMonth()]," ").concat(T.getFullYear()),F.translatedDays[Y.getDay()]),J=F.translatedDays[T.getDay()];return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"".concat(S.a.content," ").concat(i?S.a.activeContent:""),onClick:function(){c(!i)}},l.a.createElement("div",{className:S.a.contentWrap},l.a.createElement("div",{className:S.a.left},l.a.createElement("span",null,g("deals.dealContent.from")),l.a.createElement("span",null,"$",L),l.a.createElement("span",null,g("deals.dealContent.perPerson")),l.a.createElement("div",{className:S.a.rating},A.reverse()),l.a.createElement("div",{className:S.a.detailsButton},l.a.createElement("i",{className:"fa fa-chevron-down","aria-hidden":"true"}),1===Object.values(o).length?g("deals.dealContent.hotelDetails"):g("deals.dealContent.dealDetails"))),l.a.createElement("div",{className:S.a.right},l.a.createElement("span",null,C," - ",I),l.a.createElement("span",null,l.a.createElement("span",{className:S.a.dayNames},H,"-",J)," ",q," ",g("deals.dealContent.nights")),l.a.createElement("span",null,R))),i?l.a.createElement(l.a.Fragment,null,1===Object.values(o).length?null:l.a.createElement("div",{className:S.a.details},l.a.createElement("div",{className:S.a.detailsDate},l.a.createElement("span",null,g("deals.dealContent.outboundFlight"),l.a.createElement("i",{className:"fa fa-plane ".concat(S.a.plane),"aria-hidden":"true"}))),l.a.createElement("div",{className:S.a.detailsTime},l.a.createElement("div",{className:S.a.detailsLanding},l.a.createElement("span",null,h," ",l.a.createElement("i",{className:"fa fa-clock-o","aria-hidden":"true"}),l.a.createElement("br",null),"(",E,")")),l.a.createElement("div",{className:S.a.detailsHour},l.a.createElement("span",null,p.toLowerCase(),"m"),l.a.createElement("div",null,l.a.createElement("i",{className:"fa fa-map-marker","aria-hidden":"true"}),l.a.createElement("div",{className:S.a.line}),l.a.createElement("i",{className:"fa fa-sort-desc","aria-hidden":"true"})),l.a.createElement("span",null,0===+_?g("deals.dealContent.directFlight"):"".concat(+_," ").concat(g("deals.dealContent.stops")))),l.a.createElement("div",{className:S.a.detailsLanding},l.a.createElement("span",null,f," ",l.a.createElement("i",{className:"fa fa-clock-o","aria-hidden":"true"}),l.a.createElement("br",null)," (",b,")"))),l.a.createElement("div",{className:S.a.detailsDate},l.a.createElement("span",null,g("deals.dealContent.inboundFlight"),l.a.createElement("i",{className:"fa fa-plane ".concat(S.a.inboundPlane),"aria-hidden":"true"}))),l.a.createElement("div",{className:S.a.detailsTime},l.a.createElement("div",{className:S.a.detailsLanding},l.a.createElement("span",null,w," ",l.a.createElement("i",{className:"fa fa-clock-o","aria-hidden":"true"}),l.a.createElement("br",null),"(",O,")")),l.a.createElement("div",{className:S.a.detailsHour},l.a.createElement("span",null,D.toLowerCase(),"m"),l.a.createElement("div",null,l.a.createElement("i",{className:"fa fa-map-marker","aria-hidden":"true"}),l.a.createElement("div",{className:S.a.line}),l.a.createElement("i",{className:"fa fa-sort-desc","aria-hidden":"true"})),l.a.createElement("span",null,0===+v.nb_escales?g("deals.dealContent.directFlight"):"".concat(+_," ").concat(g("deals.dealContent.stops")))),l.a.createElement("div",{className:S.a.detailsLanding},l.a.createElement("span",null,y," ",l.a.createElement("i",{className:"fa fa-clock-o","aria-hidden":"true"}),l.a.createElement("br",null),"(",j,")")))),l.a.createElement("div",{className:S.a.accomodation},l.a.createElement("p",null,g("deals.dealContent.accomodation")),l.a.createElement("div",{className:S.a.accomodationContent},l.a.createElement("div",{className:S.a.accomodationRating},l.a.createElement("div",{className:S.a.rating},A),l.a.createElement("div",{className:S.a.hotelName},R),l.a.createElement("div",{className:S.a.reviewScore},5===M.reviewScore?l.a.createElement("span",null,g("deals.dealContent.best")):4===M.reviewScore?l.a.createElement("span",null,g("deals.dealContent.excelent")):l.a.createElement("span",null,g("deals.dealContent.good"))," ",l.a.createElement("span",null,"(",M.reviewCount," ",g("deals.dealContent.reviews"),")")," ",l.a.createElement("span",null,M.reviewScore,"/5"))),l.a.createElement("img",{className:S.a.accomodationImage,src:W.url_medium,alt:"hotel"}))),l.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:m.packageDeeplinkUrl,className:S.a.makeReservation},g("deals.dealContent.reservation"))):null))},R=function(e){var t=e.deals,a=e.hash,n=e.initialRoute,r=e.handleFilterByCity,i=t.cityPhoto,s=t.cityName,o=t.cityId,u="/"===n.slice(-1)?"".concat(n).concat(o).concat(a):"".concat(n,"/").concat(o).concat(a);return l.a.createElement("div",{className:S.a.wrapper},l.a.createElement("img",{src:i,alt:"city",className:S.a.image}),l.a.createElement("div",{className:S.a.blurWrapper},l.a.createElement("div",{className:S.a.blur},l.a.createElement("img",{src:i,alt:"city",className:S.a.blurImage}))),l.a.createElement("p",{className:S.a.caption},s,l.a.createElement("span",{className:S.a.location},l.a.createElement("i",{className:"fa fa-map-marker"}))),l.a.createElement("div",{className:S.a.wrapperCaption},"".concat(t.deals.length," ").concat(g("deals.dealItem.deals"))),l.a.createElement("div",{className:S.a.contentList},t.deals.slice(0,3).map((function(e,t){return l.a.createElement(V,{key:e.dealData.dealId,deal:e})}))),t.deals.length>3?l.a.createElement(c.b,{to:u,className:S.a.moreOffers,onClick:r(o)},l.a.createElement("i",{className:"fa fa-chevron-down","aria-hidden":"true"})," ",g("deals.dealItem.moreOffers")):"")},M=function(e){return e.deals.deals.map((function(e,t){var a=e.hotelData,n=a.name,r=a.default_img;return l.a.createElement("div",{key:t,className:S.a.wrapper},l.a.createElement("img",{src:r.url_medium,alt:"hotel photo",className:S.a.image}),l.a.createElement("div",{className:S.a.blurWrapper},l.a.createElement("div",{className:S.a.blur},l.a.createElement("img",{src:r.url_medium,alt:"hotel photo",className:S.a.blurImage}))),l.a.createElement("p",{className:S.a.caption},n,l.a.createElement("span",{className:S.a.location},l.a.createElement("i",{className:"fa fa-map-marker"}))),l.a.createElement("div",{className:S.a.contentList},l.a.createElement(V,{deal:e})))}))},W=a(22),A=a.n(W),B=function(e){var t=e.deals,a=e.cityDeal,n=e.hash,r=e.initialRoute,i=e.handleFilterByCity;return l.a.createElement("div",{className:A.a.list},0===t.length?l.a.createElement("h5",{className:A.a.information},g("deals.dealList.noFlights"),"."):t.map((function(e,t){return a?l.a.createElement(M,{key:t,deals:e}):l.a.createElement(R,{handleFilterByCity:i,initialRoute:r,key:t,deals:e,hash:n})})))};var x=function(e){var t=e.deals,a=Object(f.h)().city,n=t.filter((function(e){return a.split("-").some((function(t){return+t===e.cityId}))}));return l.a.createElement("div",null,n.length>0?l.a.createElement("h3",{className:p.a.title},g("deals.cityDeals.resultFor")," ",n[0].cityName):null,l.a.createElement(B,{deals:n,cityDeal:!0}))},Y=a(18),T=a.n(Y),q=function(){return l.a.createElement("div",{className:T.a.loading},l.a.createElement("img",{className:T.a.loadingDesktop,src:"https://d16tr0byigrcd.cloudfront.net/images/package-loader.gif",alt:"loading"}),l.a.createElement("img",{className:T.a.loadingMobile,src:"https://d16tr0byigrcd.cloudfront.net/images/package-loader.gif",alt:"loading"}))};console.log(F);var H=Object(f.i)((function(e){var t=Object(n.useState)([]),a=Object(u.a)(t,2),r=a[0],i=a[1],m=Object(n.useState)([]),h=Object(u.a)(m,2),v=h[0],_=h[1],b=Object(n.useState)([]),E=Object(u.a)(b,2),g=E[0],N=E[1],y=Object(n.useState)(!0),w=Object(u.a)(y,2),O=w[0],j=w[1],C=Object(f.f)(),L=Object(f.g)(),S={nights:[{value:2,label:"2+",active:!1},{value:3,label:"3+",active:!1},{value:4,label:"4+",active:!1},{value:5,label:"5+",active:!1},{value:6,label:"6+",active:!1},{value:7,label:"7",active:!1}],hotelRating:[{value:3,label:"3+",active:!1},{value:4,label:"4+",active:!1},{value:5,label:"5+",active:!1}],preferedVacation:[{value:0,label:"Weekends",active:!1},{value:1,label:"Summer holiday",active:!1},{value:2,label:"Holidays break",active:!1}],hotelStars:[{value:3,label:"3+",active:!1},{value:4,label:"4+",active:!1},{value:5,label:"5+",active:!1}],cities:[],dates:[],themes:[],airports:[]},V=window.location.pathname,R=V.split("/");parseInt(R[R.length-1])&&(V=R.slice(0,R.length-1).join("/")||"/"),V="/"===V.slice(-1)?V:V+"/";var M=Object(n.useState)(V),W=Object(u.a)(M,2),A=W[0],Y=(W[1],Object(n.useState)(S)),T=Object(u.a)(Y,2),H=T[0],J=T[1],P=Object(n.useState)(L.hash),G=Object(u.a)(P,2),z=G[0],X=G[1],K=Object(n.useState)(!0),Q=Object(u.a)(K,2),U=Q[0],Z=Q[1],$=function(e){return function(){J((function(t){return Object(o.a)({},t,{cities:t.cities.map((function(t){var a=t.value,n=t.label;return a===e?{label:n,active:!0,value:a}:{label:n,active:!1,value:a}}))})}))}},ee=function(){J((function(e){var t={};for(var a in e)"from"!==a?t[a]=e[a].map((function(e){return Object(o.a)({},e,{active:!1})})):t.from={year:S.from.year,months:S.from.months.map((function(e){return Object(o.a)({},e,{active:!1})}))};return t}))};return Object(n.useEffect)((function(){fetch("http://admin.holidayfinder.travelyo-cdn.site/api/deals/api.php").then((function(e){return e.json()})).then((function(e){_(e.specialDates),i(e.items),j(!1)}))}),[]),Object(n.useEffect)((function(){if(0!==r.length){var e=r.filter((function(e){if(0===H.themes.filter((function(e){return e.active})).length)return e;var t=e.themes,a=[];for(var n in t)a.push({value:+n,label:t[n]});return H.themes.filter((function(e){return e.active})).some((function(e){var t=e.value;return a.some((function(e){return e.value===t}))}))})).map((function(e){return Object(o.a)({},e,{deals:e.deals.filter((function(e){if(0===H.airports.filter((function(e){return e.active})).length)return e;var t=e.flightData.city_from_airport_code;return H.airports.filter((function(e){return e.active})).some((function(e){var a=e.value;return t===a}))}))})})).map((function(e){return Object(o.a)({},e,{deals:e.deals.filter((function(e){var t=e.hotelData;return 0===H.hotelStars.filter((function(e){return e.active})).length?e:H.hotelStars.filter((function(e){return e.active})).some((function(e){return e.value<=t.rating}))}))})})).map((function(e){return Object(o.a)({},e,{deals:e.deals.filter((function(e){var t=e.hotelData;return 0===H.hotelRating.filter((function(e){return e.active})).length?e:H.hotelRating.filter((function(e){return e.active})).some((function(e){return e.value<=t.trustYouReviews.reviewScore}))}))})})).map((function(e){return Object(o.a)({},e,{deals:e.deals.filter((function(e){if(0===H.nights.filter((function(e){return e.active})).length)return e;var t=e.dealData,a=t.outboundDate,n=t.inboundDate,l=function(e){return new Date(+e[2],+e[1]-1,+e[0])},r=l(a.split("/")),i=k(l(n.split("/"))-r,"d");return H.nights.filter((function(e){return e.active})).some((function(e){return e.value<=i}))}))})})).filter((function(e){return 0===H.cities.filter((function(e){return e.active})).length?e:H.cities.filter((function(e){return e.active})).some((function(t){return t.value===e.cityId}))})).map((function(e){return Object(o.a)({},e,{deals:e.deals.filter((function(e){if(0===H.preferedVacation.filter((function(e){return e.active})).length)return e;var t=e.dealData,a=t.outboundDate,n=(t.inboundDate,function(e){return new Date(+e[2],+e[1]-1,+e[0])}),l=n(a.split("/"));return H.preferedVacation.filter((function(e){return e.active})).some((function(e){var t=e.from_date,a=e.to_date,r=n(a.split("/")),i=n(t.split("/"));return console.log(d()(l)<d()(r)&&d()(l)>d()(i)),d()(l)<d()(r)&&d()(l)>d()(i)}))}))})})).map((function(e){return Object(o.a)({},e,{deals:e.deals.filter((function(e){var t,a=e.dealData.outboundDate,n=(t=a.split("/"),new Date(+t[2],+t[1]-1,+t[0]));return H.dates.some((function(e){e.label;var t=e.value,a=e.active;if(0===H.dates.filter((function(e){return e.active})).length)return!0;if(a){var l=d()(t);return l.format("MMMM")===d()(n).format("MMMM")&&l.format("YYYY")===d()(n).format("YYYY")}}))}))})})).filter((function(e){return e.deals.length>0}));N(e)}}),[H,r]),Object(n.useEffect)((function(){var e=r.map((function(e){var t=e.cityName;return{value:e.cityId,label:t,active:!1}})),t=r.map((function(e){return e.deals})).flat().filter((function(e){return e.flightData})).map((function(e){var t=e.flightData;return{value:t.city_from_airport_code,label:t.city_from_airport}})),a=[],n=new Map,l=!0,i=!1,c=void 0;try{for(var u,m=t[Symbol.iterator]();!(l=(u=m.next()).done);l=!0){var d=u.value;n.has(d.value)||(n.set(d.value,!0),a.push({value:d.value,label:d.label,active:!1}))}}catch(V){i=!0,c=V}finally{try{l||null==m.return||m.return()}finally{if(i)throw c}}var f=r.map((function(e){return e.deals})).flat().map((function(e){var t,a=e.dealData.outboundDate,n=(t=a.split("/"),new Date(+t[2],+t[1]-1,+t[0]));n.setDate(1);var l="".concat(F.translatedMonths[n.getMonth()],", ").concat(n.getFullYear());return{value:n,label:l=l.charAt(0).toUpperCase()+l.slice(1)}})).sort((function(e,t){return e.value-t.value})),h=[],p=new Map,_=!0,b=!1,E=void 0;try{for(var g,N=f[Symbol.iterator]();!(_=(g=N.next()).done);_=!0){var y=g.value;p.has(y.label)||(p.set(y.label,!0),h.push({value:y.value,label:y.label,active:!1}))}}catch(V){b=!0,E=V}finally{try{_||null==N.return||N.return()}finally{if(b)throw E}}var w=r.map((function(e){return e.themes})),D=[];w.forEach((function(e){var t=function(t){if(D.some((function(e){return e.value===+t})))return{v:void 0};D.push({value:+t,label:e[t],active:!1})};for(var a in e){var n=t(a);if("object"===typeof n)return n.v}}));var O=v.map((function(e){var t=e.name,a=e.from_date,n=e.to_date;return{label:t,active:!1,from_date:a,to_date:n,value:a+n}})),j=Object(o.a)({},H,{themes:D,cities:e,airports:a,dates:h,preferedVacation:O});if(!L.hash)return J(Object(o.a)({},H,{},j));var C=L.hash.slice(1).split("&").reduce((function(e,t){var a=t.split("=");return Object(o.a)({},e,Object(s.a)({},a[0],a[1].split(",")))}),{}),I={},S=function(e){var t=j[e],a=C[e];if(C.hasOwnProperty(e)){if("dates"===e)return I[e]=t.map((function(e){return a.some((function(t){return+e.value===+t}))?Object(o.a)({},e,{active:!0}):e})),"continue";if(isNaN(+a[0]))return I[e]=t.map((function(e){return a.some((function(t){return e.value===t}))?Object(o.a)({},e,{active:!0}):e})),"continue";I[e]=t.map((function(e){return a.some((function(t){return e.value===+t}))?Object(o.a)({},e,{active:!0}):e}))}};for(var k in j)S(k);J(Object(o.a)({},H,{},j,{},I))}),[r,L.hash]),Object(n.useEffect)((function(){if(0!==H.cities.length){var e="#";for(var t in H)"dates"!==t?H[t].length>0&&H[t].filter((function(e){return e.active})).length>0&&(e="".concat(e).concat(t,"=").concat(H[t].filter((function(e){return e.active})).map((function(e){return e.value})).join(","),"&")):H[t].filter((function(e){return e.active})).length>0&&(e="".concat(e,"dates=").concat(H[t].filter((function(e){return e.active})).map((function(e){return+e.value})).join(","),"&"));if(e=e.slice(0,e.length-1),1===H.cities.filter((function(e){return e.active})))return null;X(e)}}),[H]),Object(n.useEffect)((function(){if(1===H.cities.filter((function(e){return e.active})).length){var e=H.cities.filter((function(e){return e.active}))[0],t="/"===A.slice(-1)?"".concat(A).concat(e.value).concat(z):"".concat(A,"/").concat(e.value).concat(z);C.replace(t)}else if(0===H.cities.filter((function(e){return e.active})).length){if(U)return Z(!1);var a="".concat(A).concat(z);C.replace(a)}else setTimeout((function(){return C.replace(L.pathname+z)}),5)}),[z]),l.a.createElement("div",{className:p.a.App},l.a.createElement(c.a,null,l.a.createElement(f.c,null,l.a.createElement(f.a,{path:A,exact:!0},l.a.createElement(l.a.Fragment,null,l.a.createElement(D,{countDeals:g.reduce((function(e,t){return t.deals.length+e}),0),filters:H,setFilters:J,initialRoute:A,hash:z,showCity:!0,showLocationTheme:!0,handleFilterByCity:$}),O?l.a.createElement(q,null):l.a.createElement(l.a.Fragment,null,l.a.createElement(I,{initialRoute:A,hash:z,filters:H,initialFilters:S,setFilters:J,resetFilters:ee}),l.a.createElement(B,{handleFilterByCity:$,initialRoute:A,deals:g,hash:z})))),l.a.createElement(f.a,{path:A+":city"},l.a.createElement(l.a.Fragment,null,l.a.createElement(D,{countDeals:g.reduce((function(e,t){return t.deals.length+e}),0),filters:H,setFilters:J,initialRoute:A,hash:z,showCity:!1,showLocationTheme:!1}),O?l.a.createElement(q,null):l.a.createElement(l.a.Fragment,null,l.a.createElement(I,{initialRoute:A,hash:z,filters:H,initialFilters:S,setFilters:J,resetFilters:ee}),l.a.createElement(x,{deals:g})))))))}));i.a.render(l.a.createElement(c.a,null,l.a.createElement(H,null)),document.getElementById("dealsapp"))}},[[28,1,2]]]);
//# sourceMappingURL=main.f202e188.chunk.js.map