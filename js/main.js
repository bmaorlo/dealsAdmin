(this.webpackJsonpproto=this.webpackJsonpproto||[]).push([[0],{1:function(e,t,a){e.exports={wrapper:"DealItem_wrapper__2gQtH",wrapperCaption:"DealItem_wrapperCaption__3-YC3",image:"DealItem_image__nbzlP",blur:"DealItem_blur__2P4rz",blurWrapper:"DealItem_blurWrapper__25cBM",blurImage:"DealItem_blurImage__2RK1i",location:"DealItem_location__2C1E8",caption:"DealItem_caption__2wk0v",contentList:"DealItem_contentList__2RFeK",content:"DealItem_content__TM1Pl",activeContent:"DealItem_activeContent__3XjGw",contentWrap:"DealItem_contentWrap__wlMKu",left:"DealItem_left__3icQQ",right:"DealItem_right__2IpUy",dayNames:"DealItem_dayNames__k5WB4",rating:"DealItem_rating__28fOm",detailsButton:"DealItem_detailsButton__3NG3B",moreOffers:"DealItem_moreOffers__2Sz6g",details:"DealItem_details__tKXuF",detailsDate:"DealItem_detailsDate__2azNQ",detailsTime:"DealItem_detailsTime__2ltCl",plane:"DealItem_plane__1Ex3G",detailsLanding:"DealItem_detailsLanding__16Qrd",detailsHour:"DealItem_detailsHour__vRELs",line:"DealItem_line__3JT7V",accomodation:"DealItem_accomodation__3LDA2",accomodationContent:"DealItem_accomodationContent__3kVQk",accomodationImage:"DealItem_accomodationImage__2XpMD",accomodationRating:"DealItem_accomodationRating__1fi9e",hotelName:"DealItem_hotelName__12FsS",reviewScore:"DealItem_reviewScore__PmeGL",makeReservation:"DealItem_makeReservation__16JxE",orangeStar:"DealItem_orangeStar__u3Em5",greyStar:"DealItem_greyStar__2AuZG"}},14:function(e,t,a){e.exports={chipWrap:"style_chipWrap__24PA9",chipContent:"style_chipContent__SbE_z",chip:"style_chip__y9sqy",chipLabel:"style_chipLabel__2o48s"}},16:function(e,t,a){e.exports={formWrap:"Filter_formWrap__2kqIm",form:"Filter_form__Ce9v7",results:"Filter_results__3Aub9",inputWrap:"Filter_inputWrap__1Mi5h",button:"Filter_button__ml8PL"}},17:function(e,t,a){e.exports={App:"App_App__2aEw1",title:"App_title__1dpqj"}},18:function(e,t,a){e.exports={loading:"styles_loading__2p196",loadingMobile:"styles_loadingMobile__2abBK",loadingDesktop:"styles_loadingDesktop__26m2Y"}},2:function(e,t,a){e.exports={wrapper:"style_wrapper__GAB4U",label:"style_label__q8k67",activeLabel:"style_activeLabel__2pL00",optionList:"style_optionList__2hZRC",optionListWrapper:"style_optionListWrapper__7TiFu",optionListShadow:"style_optionListShadow__2FVpK",optionListItem:"style_optionListItem__1_h_g",optionListItemActive:"style_optionListItemActive__1Trp9",optionListHeader:"style_optionListHeader__2kCNS",optionListButtons:"style_optionListButtons__QX6NN",starsWrap:"style_starsWrap__3tsbF",active:"style_active__3LsdE",button:"style_button__1C9Jr",buttonOutline:"style_buttonOutline__1dL16",square:"style_square__38RuA",searchInput:"style_searchInput__1yjbs",yearsSelect:"style_yearsSelect__2KNXJ",yearsWrap:"style_yearsWrap__1Dwed",yearList:"style_yearList__2y-Eo",yearItem:"style_yearItem__3uhiq"}},22:function(e,t,a){e.exports={information:"DealsList_information__3GERY",list:"DealsList_list__zwXAE"}},29:function(e,t,a){e.exports=a(41)},34:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(25),c=a.n(r),i=(a(34),a(12)),s=a(6),o=a(3),u=a(28),m=a(4),f=a(10),d=a.n(f),p=a(7),h=a(17),v=a.n(h),_=a(16),E=a.n(_),b=a(2),g=a.n(b);function N(e,t){return void 0!==t?window.Translator.trans(e,t):window.Translator.trans(e)}var y=function(e){var t=e.position,a=e.label,r=(e.options,e.handleChange),c=(e.defaultValue,e.showSearch),i=(e.activeFirst,e.value),u=e.showVariants,f=e.setShowVariants,d=Object(n.useState)(i),p=Object(m.a)(d,2),h=p[0],v=p[1],_=Object(n.useState)(""),E=Object(m.a)(_,2),b=E[0],y=E[1];Object(n.useEffect)((function(){v(i)}),[i]);var w=Object(n.useRef)(null);return l.a.createElement("div",{className:g.a.wrapper},l.a.createElement("div",{ref:w,className:"".concat(g.a.label," ").concat(u||i.filter((function(e){return e.active})).length>0?g.a.activeLabel:null),onClick:function(){w.current.scrollIntoView({block:"center",behavior:"smooth"}),f(!u)}},a),u?l.a.createElement("div",{className:g.a.optionListWrapper,style:t?Object(s.a)({},t,0):{left:0}},l.a.createElement("div",{className:g.a.optionListHeader},l.a.createElement("span",null,a)," ",l.a.createElement("span",{onClick:function(){r(h.map((function(e){return Object(o.a)({},e,{active:!1})}))),v(h.map((function(e){return Object(o.a)({},e,{active:!1})}))),f(!1)}},N("deals.filter.clearAll"))),c?l.a.createElement("input",{className:g.a.searchInput,type:"text",value:b,onChange:function(e){return y(e.target.value)},placeholder:"Search and select cities for filter"}):null,l.a.createElement("ul",{className:g.a.optionList},h.filter((function(e){return e.label.toLowerCase().includes(b.toLowerCase())})).map((function(e){var t,a=e.value,n=e.label,r=e.active;return l.a.createElement("li",{key:a,className:g.a.optionListItem,onClick:(t=a,function(){v((function(e){return e.map((function(e){return e.value!==t?e:Object(o.a)({},e,{active:!e.active})}))}))})},r?l.a.createElement("div",{className:g.a.optionListItemActive},l.a.createElement("i",{className:"fa fa-check-square","aria-hidden":"true"})):l.a.createElement("div",{className:g.a.square}),l.a.createElement("span",{className:r?g.a.active:""},n))}))),l.a.createElement("div",{className:g.a.optionListButtons},l.a.createElement("button",{className:"".concat(g.a.button," ").concat(g.a.buttonOutline),onClick:function(){return f(!1)}},N("deals.filter.cancel")),l.a.createElement("button",{className:g.a.button,onClick:function(){r(h),f(!1)}},N("deals.filter.done"))),l.a.createElement("div",{className:g.a.optionListShadow,onClick:function(){return f(!1)}})):null)},w=function(e){var t=e.position,a=e.label,r=e.handleChange,c=(e.defaultValue,e.showSearch,e.value),i=e.showVariants,u=e.setShowVariants,f=Object(n.useState)(c),d=Object(m.a)(f,2),p=d[0],h=d[1];Object(n.useEffect)((function(){h(c)}),[c]);var v=Object(n.useRef)(null);return l.a.createElement("div",{className:g.a.wrapper},l.a.createElement("div",{ref:v,className:"".concat(g.a.label," ").concat(i||c.filter((function(e){return e.active})).length>0?g.a.activeLabel:null),onClick:function(){v.current.scrollIntoView({block:"center",behavior:"smooth"}),u(!i)}},a),i?l.a.createElement("div",{className:g.a.optionListWrapper,style:t?Object(s.a)({},t,0):{left:0}},l.a.createElement("div",{className:g.a.optionListHeader},l.a.createElement("span",null,a)," ",l.a.createElement("span",{onClick:function(){r(p.map((function(e){return Object(o.a)({},e,{active:!1})}))),h(p.map((function(e){return Object(o.a)({},e,{active:!1})}))),u(!1)}},N("deals.filter.clearAll"))),l.a.createElement("ul",{className:g.a.optionList},p.map((function(e){var t,a=e.value,n=e.label,r=e.active;return l.a.createElement("li",{key:a,className:g.a.optionListItem,onClick:(t=a,function(){h((function(e){return e.map((function(e){return e.value!==t?e:Object(o.a)({},e,{active:!e.active})}))}))})},r?l.a.createElement("div",{className:g.a.optionListItemActive},l.a.createElement("i",{className:"fa fa-check-square","aria-hidden":"true"})):l.a.createElement("div",{className:g.a.square}),l.a.createElement("span",{className:r?g.a.active:""},n))}))),l.a.createElement("div",{className:g.a.optionListButtons},l.a.createElement("button",{className:"".concat(g.a.button," ").concat(g.a.buttonOutline),onClick:function(){return u(!1)}},N("deals.filter.cancel")),l.a.createElement("button",{className:g.a.button,onClick:function(){r(p),u(!1)}},N("deals.filter.done"))),l.a.createElement("div",{className:g.a.optionListShadow,onClick:function(){return u(!1)}})):null)},O=function(e){var t=e.position,a=e.label,r=e.handleChange,c=(e.defaultValue,e.showSearch),i=(e.activeFirst,e.value),u=e.showVariants,f=e.setShowVariants,d=e.hash,h=e.initialRoute,v=e.handleFilterByCity,_=Object(n.useState)(i),E=Object(m.a)(_,2),b=E[0],y=E[1],w=Object(n.useState)(""),O=Object(m.a)(w,2),j=O[0],C=O[1],D=Object(p.f)();Object(n.useEffect)((function(){y(i)}),[i]);var L=Object(n.useRef)(null);return l.a.createElement("div",{className:g.a.wrapper},l.a.createElement("div",{ref:L,className:"".concat(g.a.label," ").concat(u||i.filter((function(e){return e.active})).length>0?g.a.activeLabel:null),onClick:function(){L.current.scrollIntoView({block:"center"}),f(!u)}},a),u?l.a.createElement("div",{className:g.a.optionListWrapper,style:t?Object(s.a)({},t,0):{left:0}},l.a.createElement("div",{className:g.a.optionListHeader},l.a.createElement("span",null,a)," ",l.a.createElement("span",{onClick:function(){r(b.map((function(e){return Object(o.a)({},e,{active:!1})}))),y(b.map((function(e){return Object(o.a)({},e,{active:!1})}))),f(!1)}},N("deals.filter.clearAll"))),c?l.a.createElement("input",{className:g.a.searchInput,type:"text",value:j,onChange:function(e){return C(e.target.value)},placeholder:N("deals.filter.placeholderCities")}):null,l.a.createElement("ul",{className:g.a.optionList},b.filter((function(e){return e.label.toLowerCase().includes(j.toLowerCase())})).map((function(e){var t,a=e.value,n=e.label,r=e.active;return l.a.createElement("li",{key:a,className:g.a.optionListItem,onClick:(t=a,function(){y((function(e){return e.map((function(e){return e.value!==t?e:Object(o.a)({},e,{active:!e.active})}))}))})},r?l.a.createElement("div",{className:g.a.optionListItemActive},l.a.createElement("i",{className:"fa fa-check-square","aria-hidden":"true"})):l.a.createElement("div",{className:g.a.square}),l.a.createElement("span",{className:r?g.a.active:""},n))}))),l.a.createElement("div",{className:g.a.optionListButtons},l.a.createElement("button",{className:"".concat(g.a.button," ").concat(g.a.buttonOutline),onClick:function(){return f(!1)}},N("deals.filter.cancel")),l.a.createElement("button",{className:g.a.button,onClick:function(){if(f(!1),1===b.filter((function(e){return e.active})).length){var e=b.filter((function(e){return e.active}))[0];console.log(e),console.log(v),v(e.value)();var t="/"===h.slice(-1)?"".concat(h).concat(e.value).concat(d):"".concat(h,"/").concat(e.value).concat(d);return D.push(t),null}r(b)}},N("deals.filter.done"))),l.a.createElement("div",{className:g.a.optionListShadow,onClick:function(){return f(!1)}})):null)},j=function(e){var t=e.filters,a=e.setFilters,r=e.countDeals,c=e.hash,i=e.initialRoute,u=e.showCity,f=e.showLocationTheme,d=e.handleFilterByCity,p=Object(n.useRef)(null),h=function(e){return function(t){a((function(a){return Object(o.a)({},a,Object(s.a)({},e,t))}))}},v={cities:!1,airports:!1,themes:!1,hotelStars:!1,dates:!1,nights:!1,preferedVacation:!1,hotelRating:!1},_=Object(n.useState)(v),b=Object(m.a)(_,2),g=b[0],j=b[1],C=function(e){return function(t){j(Object(o.a)({},v,Object(s.a)({},e,t)))}};return Object(n.useEffect)((function(){function e(e){p.current&&!p.current.contains(e.target)&&j(v)}return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[v]),l.a.createElement("div",{className:E.a.formWrap,ref:p},l.a.createElement("form",{className:E.a.form,onSubmit:function(e){return e.preventDefault()}},l.a.createElement("div",{className:E.a.results},l.a.createElement("span",null,N("deals.filter.available")),l.a.createElement("span",null,r," ",N("deals.filter.results"))),l.a.createElement("div",{className:E.a.inputWrap},0!==t.cities.length&&u?l.a.createElement(O,{handleChange:h("cities"),label:N("deals.filter.cities"),value:t.cities,showSearch:!0,setShowVariants:C("cities"),showVariants:g.cities,initialRoute:i,hash:c,handleFilterByCity:d}):null,t.airports.length<2?null:l.a.createElement(y,{handleChange:h("airports"),label:N("deals.filter.airport"),value:t.airports,setShowVariants:C("airports"),showVariants:g.airports}),0!==t.themes.length&&f?l.a.createElement(y,{handleChange:h("themes"),label:N("deals.filter.locationTheme"),value:t.themes,setShowVariants:C("themes"),showVariants:g.themes}):null,l.a.createElement(y,{handleChange:h("hotelStars"),label:N("deals.filter.stars"),value:t.hotelStars,setShowVariants:C("hotelStars"),showVariants:g.hotelStars}),l.a.createElement(w,{handleChange:h("dates"),label:N("deals.filter.monthOfTheYear"),value:t.dates,setShowVariants:C("dates"),showVariants:g.dates}),l.a.createElement(y,{handleChange:h("nights"),label:N("deals.filter.nights"),value:t.nights,activeFirst:!0,setShowVariants:C("nights"),showVariants:g.nights}),l.a.createElement(y,{handleChange:h("preferedVacation"),label:N("deals.filter.when"),value:t.preferedVacation,setShowVariants:C("preferedVacation"),showVariants:g.preferedVacation,position:"right"}),l.a.createElement(y,{handleChange:h("hotelRating"),label:N("deals.filter.ratings"),value:t.hotelRating,position:"right",setShowVariants:C("hotelRating"),showVariants:g.hotelRating}))))},C=a(14),D=a.n(C),L=function(e){var t=e.list,a=e.show,n=e.chipLabel,r=e.handleDelete;return a?l.a.createElement("div",{className:D.a.chip},l.a.createElement("span",null,n),t.filter((function(e){return e.active})).map((function(e){var t=e.value,a=e.label;return l.a.createElement("div",{key:t,className:D.a.chipLabel,onClick:function(){return r(t)}},a," ",l.a.createElement("i",{className:"fa fa-times","aria-hidden":"true"}))}))):null},I=function(e){var t=e.filters,a=e.setFilters,n=(e.initialFilters,e.hash),r=e.initialRoute,c=e.resetFilters,i=t.nights,u=t.hotelRating,m=t.preferedVacation,f=t.hotelStars,d=t.cities,h=t.dates,v=t.themes,_=t.airports,E=Object(p.f)(),b=function(e){return function(t){a((function(a){if("from"===e)return Object(o.a)({},a,Object(s.a)({},e,{year:a.from.year,months:a.from.months.map((function(e){return e.value===t?Object(o.a)({},e,{active:!e.active}):e}))}));var l=a[e].map((function(e){return e.value===t?Object(o.a)({},e,{active:!e.active}):e}));if("cities"===e&&0===l.filter((function(e){return e.active})).length){var c="".concat(r).concat(n);E.push(c)}if("cities"===e&&1===l.filter((function(e){return e.active})).length){var i=l.filter((function(e){return e.active}))[0],u="/"===r.slice(-1)?"".concat(r).concat(i.value).concat(n):"".concat(r,"/").concat(i.value).concat(n);E.push(u)}return Object(o.a)({},a,Object(s.a)({},e,l))}))}},g=!1;for(var y in t)g=0!==t[y].filter((function(e){return e.active})).length||g;return l.a.createElement("div",{className:D.a.chipWrap},l.a.createElement("div",{className:D.a.chipContent},g?l.a.createElement("div",{className:D.a.chip},l.a.createElement("div",{className:D.a.chipLabel,onClick:function(){var e="".concat(r).concat(n);E.push(e),c()}},N("deals.chips.clearAll")," ",l.a.createElement("i",{className:"fa fa-times","aria-hidden":"true"}))):null,l.a.createElement(L,{chipLabel:"".concat(N("deals.chips.cities"),":"),list:d,show:0!==d.filter((function(e){return e.active})).length,handleDelete:b("cities")}),l.a.createElement(L,{chipLabel:"".concat(N("deals.chips.nights"),":"),list:i,show:0!==i.filter((function(e){return e.active})).length,handleDelete:b("nights")}),l.a.createElement(L,{chipLabel:"".concat(N("deals.chips.theme"),":"),list:v,show:0!==v.filter((function(e){return e.active})).length,handleDelete:b("themes")}),l.a.createElement(L,{chipLabel:"".concat(N("deals.chips.preferedVacation"),":"),list:m,show:0!==m.filter((function(e){return e.active})).length,handleDelete:b("preferedVacation")}),l.a.createElement(L,{chipLabel:"".concat(N("deals.chips.hotelStars"),":"),list:f,show:0!==f.filter((function(e){return e.active})).length,handleDelete:b("hotelStars")}),l.a.createElement(L,{chipLabel:"".concat(N("deals.chips.airports"),":"),list:_,show:0!==_.filter((function(e){return e.active})).length,handleDelete:b("airports")}),l.a.createElement(L,{chipLabel:"".concat(N("deals.chips.dates"),":"),list:h,show:0!==h.filter((function(e){return e.active})).length,handleDelete:b("dates")}),l.a.createElement(L,{chipLabel:"".concat(N("deals.chips.hotelRating"),":"),list:u,show:0!==u.filter((function(e){return e.active})).length,handleDelete:b("hotelRating")})))},S=a(1),k=a.n(S);function F(e,t){var a,n,l,r,c,i,s;switch(s=parseInt(Math.floor(e/1e3)),i=parseInt(Math.floor(s/60)),c=parseInt(Math.floor(i/60)),a=parseInt(Math.floor(c/24)),r=parseInt(s%60),l=parseInt(i%60),n=parseInt(c%24),t){case"s":return s;case"m":return i;case"h":return c;case"d":return a;default:return{d:a,h:n,m:l,s:r}}}var V=function(e){var t=e.deal,a=Object(n.useState)(!1),r=Object(m.a)(a,2),c=r[0],i=r[1],s=t.hotelData,o=t.flightData,u=t.dealData;o||((o={}).default_inbound={},console.log(o,u.price));for(var f=o,d=(f.takeoff_date,f.takeoff_hour,f.landing_hour),p=(f.landing_date,f.travel_duration_format),h=f.default_inbound,v=f.nb_escales,_=f.city_from_airport_code,E=f.city_to_airport_code,b=f.comp_logo,g=f.comp_path,y=o.default_inbound,w=(y.takeoff_date,y.takeoff_hour),O=y.landing_hour,j=(y.landing_date,y.travel_duration_format),C=y.city_from_airport_code,D=y.city_to_airport_code,L=y.comp_logo,I=y.comp_path,S=u.outboundDate,V=u.inboundDate,R=u.price,M=s.rating,W=s.name,A=s.trustYouReviews,B=s.default_img,T=[],Y=1;Y<=5;Y++)Y<=M?T.push(l.a.createElement("div",{className:k.a.orangeStar,key:Y},l.a.createElement("i",{className:"fa fa-star"}))):T.push(l.a.createElement("div",{className:k.a.greyStar,key:Y},l.a.createElement("i",{className:"fa fa-star"})));var x=function(e){return new Date(+e[2],+e[1]-1,+e[0])},q=x(S.split("/")),H=x(V.split("/")),P=F(H-q,"d"),J="".concat(q.getDate(),". ").concat(q.toLocaleString("default",{month:"long"})," ").concat(q.getFullYear()),z="".concat(H.getDate(),". ").concat(H.toLocaleString("default",{month:"long"})," ").concat(H.getFullYear()),G="".concat(q.toLocaleString("default",{weekday:"long"})),K="".concat(H.toLocaleString("default",{weekday:"long"}));return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"".concat(k.a.content," ").concat(c?k.a.activeContent:null),onClick:function(){i(!c)}},l.a.createElement("div",{className:k.a.contentWrap},l.a.createElement("div",{className:k.a.left},l.a.createElement("span",null,N("deals.dealContent.from")),l.a.createElement("span",null,"$",R),l.a.createElement("span",null,N("deals.dealContent.perPerson")),l.a.createElement("div",{className:k.a.rating},T.reverse()),l.a.createElement("div",{className:k.a.detailsButton},l.a.createElement("i",{className:"fa fa-chevron-down","aria-hidden":"true"}),N("deals.dealContent.details"))),l.a.createElement("div",{className:k.a.right},l.a.createElement("span",null,S,"-",V),l.a.createElement("span",null,l.a.createElement("span",{className:k.a.dayNames},G,"-",K)," ",P," ",N("deals.dealContent.nights")),l.a.createElement("span",null,W))),c?l.a.createElement(l.a.Fragment,null,1===Object.values(o).length?null:l.a.createElement("div",{className:k.a.details},l.a.createElement("div",{className:k.a.detailsDate},l.a.createElement("span",null,J),l.a.createElement("span",null,N("deals.dealContent.flight"))),l.a.createElement("div",{className:k.a.detailsTime},l.a.createElement("div",{className:k.a.detailsLanding},l.a.createElement("span",null,N("deals.dealContent.landingTime")),l.a.createElement("span",null,d," ",l.a.createElement("i",{className:"fa fa-clock-o","aria-hidden":"true"})," (",E,")")),l.a.createElement("div",{className:k.a.detailsHour},l.a.createElement("span",null,p.toLowerCase(),"m"),l.a.createElement("div",null,l.a.createElement("i",{className:"fa fa-map-marker","aria-hidden":"true"}),l.a.createElement("div",{className:k.a.line}),l.a.createElement("i",{className:"fa fa-sort-desc","aria-hidden":"true"})),l.a.createElement("span",null,0===+v?N("deals.dealContent.directFlight"):"".concat(+v," ").concat(N("deals.dealContent.stops")))),l.a.createElement("div",{className:k.a.detailsLanding},l.a.createElement("span",null,N("deals.dealContent.departure")),l.a.createElement("span",null,d," ",l.a.createElement("i",{className:"fa fa-clock-o","aria-hidden":"true"})," (",_,")")),l.a.createElement("img",{src:"".concat(g).concat(b),alt:""}),l.a.createElement("i",{className:"fa fa-plane ".concat(k.a.plane),"aria-hidden":"true"})),l.a.createElement("div",{className:k.a.detailsDate},l.a.createElement("span",null,z),l.a.createElement("span",null)),l.a.createElement("div",{className:k.a.detailsTime},l.a.createElement("div",{className:k.a.detailsLanding},l.a.createElement("span",null,N("deals.dealContent.landingTime")),l.a.createElement("span",null,O," ",l.a.createElement("i",{className:"fa fa-clock-o","aria-hidden":"true"})," (",C,")")),l.a.createElement("div",{className:k.a.detailsHour},l.a.createElement("span",null,j.toLowerCase(),"m"),l.a.createElement("div",null,l.a.createElement("i",{className:"fa fa-map-marker","aria-hidden":"true"}),l.a.createElement("div",{className:k.a.line}),l.a.createElement("i",{className:"fa fa-sort-desc","aria-hidden":"true"})),l.a.createElement("span",null,0===+h.nb_escales?N("deals.dealContent.directFlight"):"".concat(+v," ").concat(N("deals.dealContent.stops")))),l.a.createElement("div",{className:k.a.detailsLanding},l.a.createElement("span",null,N("deals.dealContent.return")),l.a.createElement("span",null,w," ",l.a.createElement("i",{className:"fa fa-clock-o","aria-hidden":"true"})," (",D,")")),l.a.createElement("img",{src:"".concat(I).concat(L),alt:""}),l.a.createElement("i",{className:"fa fa-plane ".concat(k.a.plane),"aria-hidden":"true"}))),l.a.createElement("div",{className:k.a.accomodation},l.a.createElement("p",null,N("deals.dealContent.accomodation")),l.a.createElement("div",{className:k.a.accomodationContent},l.a.createElement("div",{className:k.a.accomodationRating},l.a.createElement("div",{className:k.a.rating},T),l.a.createElement("div",{className:k.a.hotelName},s.Name),l.a.createElement("div",{className:k.a.reviewScore},5===A.reviewScore?l.a.createElement("span",null,N("deals.dealContent.best")):4===A.reviewScore?l.a.createElement("span",null,N("deals.dealContent.excelent")):l.a.createElement("span",null,N("deals.dealContent.good"))," ",l.a.createElement("span",null,"(",A.reviewCount," ",N("deals.dealContent.reviews"),")")," ",l.a.createElement("span",null,A.reviewScore,"/5"))),l.a.createElement("img",{className:k.a.accomodationImage,src:B,alt:"hotel"}))),l.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:u.packageDeeplinkUrl,className:k.a.makeReservation},N("deals.dealContent.reservation"))):null))},R=function(e){var t=e.deals,a=e.hash,n=e.initialRoute,r=e.handleFilterByCity,c=t.cityPhoto,s=t.cityName,o=t.cityId,u="/"===n.slice(-1)?"".concat(n).concat(o).concat(a):"".concat(n,"/").concat(o).concat(a);return l.a.createElement("div",{className:k.a.wrapper},l.a.createElement("img",{src:c,alt:"city",className:k.a.image}),l.a.createElement("div",{className:k.a.blurWrapper},l.a.createElement("div",{className:k.a.blur},l.a.createElement("img",{src:c,alt:"city",className:k.a.blurImage}))),l.a.createElement("p",{className:k.a.caption},s,l.a.createElement("span",{className:k.a.location},l.a.createElement("i",{className:"fa fa-map-marker"}))),l.a.createElement("div",{className:k.a.wrapperCaption},N("deals.dealItem.hotelFlight")),l.a.createElement("div",{className:k.a.contentList},t.deals.slice(0,3).map((function(e,t){return l.a.createElement(V,{key:e.dealData.dealId,deal:e})}))),t.deals.length>3?l.a.createElement(i.b,{to:u,className:k.a.moreOffers,onClick:r(o)},l.a.createElement("i",{className:"fa fa-chevron-down","aria-hidden":"true"})," ",N("deals.dealItem.moreOffers")):"")},M=function(e){return e.deals.deals.map((function(e,t){var a=e.hotelData,n=a.name,r=a.default_img;return l.a.createElement("div",{key:t,className:k.a.wrapper},l.a.createElement("img",{src:r,alt:"hotel photo",className:k.a.image}),l.a.createElement("div",{className:k.a.blurWrapper},l.a.createElement("div",{className:k.a.blur},l.a.createElement("img",{src:r,alt:"hotel photo",className:k.a.blurImage}))),l.a.createElement("p",{className:k.a.caption},n,l.a.createElement("span",{className:k.a.location},l.a.createElement("i",{className:"fa fa-map-marker"}))),l.a.createElement("div",{className:k.a.contentList},l.a.createElement(V,{deal:e})))}))},W=a(22),A=a.n(W),B=function(e){var t=e.deals,a=e.cityDeal,n=e.hash,r=e.initialRoute,c=e.handleFilterByCity;return l.a.createElement("div",{className:A.a.list},0===t.length?l.a.createElement("h5",{className:A.a.information},N("deals.dealList.noFlights"),"."):t.map((function(e,t){return a?l.a.createElement(M,{key:t,deals:e}):l.a.createElement(R,{handleFilterByCity:c,initialRoute:r,key:t,deals:e,hash:n})})))};var T=function(e){var t=e.deals,a=Object(p.h)().city,n=t.filter((function(e){return a.split("-").some((function(t){return+t===e.cityId}))}));return l.a.createElement("div",null,n.length>0?l.a.createElement("h3",{className:v.a.title},N("deals.cityDeals.resultFor")," ",n[0].cityName):null,l.a.createElement(B,{deals:n,cityDeal:!0}))},Y=a(18),x=a.n(Y),q=function(){return l.a.createElement("div",{className:x.a.loading},l.a.createElement("img",{className:x.a.loadingDesktop,src:"https://d16tr0byigrcd.cloudfront.net/images/package-loader.gif",alt:"loading"}),l.a.createElement("img",{className:x.a.loadingMobile,src:"https://d16tr0byigrcd.cloudfront.net/images/package-loader.gif",alt:"loading"}))};var H=Object(p.i)((function(e){var t=Object(n.useState)([]),a=Object(m.a)(t,2),r=a[0],c=a[1],f=Object(n.useState)([]),h=Object(m.a)(f,2),_=h[0],E=h[1],b=Object(n.useState)(!0),g=Object(m.a)(b,2),N=g[0],y=g[1],w=Object(p.f)(),O=Object(p.g)(),C=(Object(u.a)(d.a.months("mm").map((function(e){return{value:+d()().month(e).format("M"),label:e,active:!1}}))).reverse(),{nights:[{value:2,label:"2+",active:!1},{value:3,label:"3+",active:!1},{value:4,label:"4+",active:!1},{value:5,label:"5+",active:!1},{value:6,label:"6+",active:!1},{value:7,label:"7",active:!1}],hotelRating:[{value:3,label:"3+",active:!1},{value:4,label:"4+",active:!1},{value:5,label:"5+",active:!1}],preferedVacation:[{value:0,label:"Weekends",active:!1},{value:1,label:"Summer holiday",active:!1},{value:2,label:"Holidays break",active:!1}],hotelStars:[{value:3,label:"3+",active:!1},{value:4,label:"4+",active:!1},{value:5,label:"5+",active:!1}],cities:[],dates:[],themes:[],airports:[]}),D=window.location.pathname,L=D.split("/");parseInt(L[L.length-1])&&(D=L.slice(0,L.length-1).join("/")||"/"),D="/"===D.slice(-1)?D:D+"/";var S=Object(n.useState)(D),k=Object(m.a)(S,2),V=k[0],R=(k[1],Object(n.useState)(C)),M=Object(m.a)(R,2),W=M[0],A=M[1],Y=Object(n.useState)(O.hash),x=Object(m.a)(Y,2),H=x[0],P=x[1],J=Object(n.useState)(!0),z=Object(m.a)(J,2),G=z[0],K=z[1],Q=function(e){return function(){A((function(t){return Object(o.a)({},t,{cities:t.cities.map((function(t){var a=t.value,n=t.label;return a===e?{label:n,active:!0,value:a}:{label:n,active:!1,value:a}}))})}))}},X=function(){A((function(e){var t={};for(var a in e)"from"!==a?t[a]=e[a].map((function(e){return Object(o.a)({},e,{active:!1})})):t.from={year:C.from.year,months:C.from.months.map((function(e){return Object(o.a)({},e,{active:!1})}))};return t}))};return Object(n.useEffect)((function(){fetch("https://s3.eu-central-1.amazonaws.com/js.smartair.co.il/test/dealsJson6.json").then((function(e){return e.json()})).then((function(e){c(e),y(!1)}))}),[]),Object(n.useEffect)((function(){if(0!==r.length){var e=r.filter((function(e){if(0===W.themes.filter((function(e){return e.active})).length)return e;var t=e.themes,a=[];for(var n in t)a.push({value:+n,label:t[n]});return W.themes.filter((function(e){return e.active})).some((function(e){var t=e.value;return a.some((function(e){return e.value===t}))}))})).map((function(e){return Object(o.a)({},e,{deals:e.deals.filter((function(e){if(0===W.airports.filter((function(e){return e.active})).length)return e;var t=e.flightData.city_from_airport_code;return W.airports.filter((function(e){return e.active})).some((function(e){var a=e.value;return t===a}))}))})})).map((function(e){return Object(o.a)({},e,{deals:e.deals.filter((function(e){var t=e.hotelData;return 0===W.hotelStars.filter((function(e){return e.active})).length?e:W.hotelStars.filter((function(e){return e.active})).some((function(e){return e.value<=t.rating}))}))})})).map((function(e){return Object(o.a)({},e,{deals:e.deals.filter((function(e){var t=e.hotelData;return 0===W.hotelRating.filter((function(e){return e.active})).length?e:W.hotelRating.filter((function(e){return e.active})).some((function(e){return e.value<=t.trustYouReviews.reviewScore}))}))})})).map((function(e){return Object(o.a)({},e,{deals:e.deals.filter((function(e){if(0===W.nights.filter((function(e){return e.active})).length)return e;var t=e.dealData,a=t.outboundDate,n=t.inboundDate,l=function(e){return new Date(+e[2],+e[1]-1,+e[0])},r=l(a.split("/")),c=F(l(n.split("/"))-r,"d");return W.nights.filter((function(e){return e.active})).some((function(e){return e.value<=c}))}))})})).filter((function(e){return 0===W.cities.filter((function(e){return e.active})).length?e:W.cities.filter((function(e){return e.active})).some((function(t){return t.value===e.cityId}))})).map((function(e){return Object(o.a)({},e,{deals:e.deals.filter((function(e){if(0===W.preferedVacation.filter((function(e){return e.active})).length)return e;var t=e.dealData,a=t.outboundDate,n=t.inboundDate,l=function(e){return new Date(+e[2],+e[1]-1,+e[0])},r=l(a.split("/")),c=F(l(n.split("/"))-r,"d");return W.preferedVacation.filter((function(e){return e.active})).some((function(e){var t=e.value;if(0===t){for(var a=["Thursday","Friday","Saturday","Sunday"],n=!1,l=0;l<c;l++)a.includes(d()(r).add(1,"day").format("dddd"))&&(n=!0);return n}return 1===t?"July"===d()(r).format("MMMM")||"August"===d()(r).format("MMMM"):2===t?"April"===d()(r).format("MMMM"):void 0}))}))})})).map((function(e){return Object(o.a)({},e,{deals:e.deals.filter((function(e){var t,a=e.dealData.outboundDate,n=(t=a.split("/"),new Date(+t[2],+t[1]-1,+t[0]));return W.dates.some((function(e){e.label;var t=e.value,a=e.active;if(0===W.dates.filter((function(e){return e.active})).length)return!0;if(a){var l=d()(t);return l.format("MMMM")===d()(n).format("MMMM")&&l.format("YYYY")===d()(n).format("YYYY")}}))}))})})).filter((function(e){return e.deals.length>0}));E(e)}}),[W,r]),Object(n.useEffect)((function(){var e=r.map((function(e){var t=e.cityName;return{value:e.cityId,label:t,active:!1}})),t=r.map((function(e){return e.deals})).flat().filter((function(e){return e.flightData})).map((function(e){var t=e.flightData;return{value:t.city_from_airport_code,label:t.city_from_airport}})),a=[],n=new Map,l=!0,c=!1,i=void 0;try{for(var u,m=t[Symbol.iterator]();!(l=(u=m.next()).done);l=!0){var f=u.value;n.has(f.value)||(n.set(f.value,!0),a.push({value:f.value,label:f.label,active:!1}))}}catch(S){c=!0,i=S}finally{try{l||null==m.return||m.return()}finally{if(c)throw i}}var d=r.map((function(e){return e.deals})).flat().map((function(e){var t,a=e.dealData.outboundDate,n=(t=a.split("/"),new Date(+t[2],+t[1]-1,+t[0]));n.setDate(1);var l="".concat(n.toLocaleString("default",{month:"long"})," ").concat(n.getFullYear());return{value:n,label:l=l.charAt(0).toUpperCase()+l.slice(1)}})),p=[],h=new Map,v=!0,_=!1,E=void 0;try{for(var b,g=d[Symbol.iterator]();!(v=(b=g.next()).done);v=!0){var N=b.value;h.has(N.label)||(h.set(N.label,!0),p.push({value:N.value,label:N.label,active:!1}))}}catch(S){_=!0,E=S}finally{try{v||null==g.return||g.return()}finally{if(_)throw E}}var y=r.map((function(e){return e.themes})),w=[];y.forEach((function(e){var t=function(t){if(w.some((function(e){return e.value===+t})))return{v:void 0};w.push({value:+t,label:e[t],active:!1})};for(var a in e){var n=t(a);if("object"===typeof n)return n.v}}));var j=Object(o.a)({},W,{themes:w,cities:e,airports:a,dates:p});if(!O.hash)return A(Object(o.a)({},W,{},j));var C=O.hash.slice(1).split("&").reduce((function(e,t){var a=t.split("=");return Object(o.a)({},e,Object(s.a)({},a[0],a[1].split(",")))}),{}),D={},L=function(e){var t=j[e],a=C[e];if(C.hasOwnProperty(e)){if("dates"===e)return D[e]=t.map((function(e){return a.some((function(t){return+e.value===+t}))?Object(o.a)({},e,{active:!0}):e})),"continue";if(isNaN(+a[0]))return D[e]=t.map((function(e){return a.some((function(t){return e.value===t}))?Object(o.a)({},e,{active:!0}):e})),"continue";D[e]=t.map((function(e){return a.some((function(t){return e.value===+t}))?Object(o.a)({},e,{active:!0}):e}))}};for(var I in j)L(I);A(Object(o.a)({},W,{},j,{},D))}),[r,O.hash]),Object(n.useEffect)((function(){if(0!==W.cities.length){var e="#";for(var t in W)"dates"!==t?W[t].length>0&&W[t].filter((function(e){return e.active})).length>0&&(e="".concat(e).concat(t,"=").concat(W[t].filter((function(e){return e.active})).map((function(e){return e.value})).join(","),"&")):W[t].filter((function(e){return e.active})).length>0&&(e="".concat(e,"dates=").concat(W[t].filter((function(e){return e.active})).map((function(e){return+e.value})).join(","),"&"));if(e=e.slice(0,e.length-1),1===W.cities.filter((function(e){return e.active})))return null;P(e)}}),[W]),Object(n.useEffect)((function(){if(1===W.cities.filter((function(e){return e.active})).length){var e=W.cities.filter((function(e){return e.active}))[0],t="/"===V.slice(-1)?"".concat(V).concat(e.value).concat(H):"".concat(V,"/").concat(e.value).concat(H);w.replace(t)}else if(0===W.cities.filter((function(e){return e.active})).length){if(G)return K(!1);var a="".concat(V).concat(H);w.replace(a)}else setTimeout((function(){return w.replace(O.pathname+H)}),5)}),[H]),l.a.createElement("div",{className:v.a.App},l.a.createElement(i.a,null,l.a.createElement(p.c,null,l.a.createElement(p.a,{path:V,exact:!0},l.a.createElement(l.a.Fragment,null,l.a.createElement(j,{countDeals:_.reduce((function(e,t){return t.deals.length+e}),0),filters:W,setFilters:A,initialRoute:V,hash:H,showCity:!0,showLocationTheme:!0,handleFilterByCity:Q}),N?l.a.createElement(q,null):l.a.createElement(l.a.Fragment,null,l.a.createElement(I,{initialRoute:V,hash:H,filters:W,initialFilters:C,setFilters:A,resetFilters:X}),l.a.createElement(B,{handleFilterByCity:Q,initialRoute:V,deals:_,hash:H})))),l.a.createElement(p.a,{path:V+":city"},l.a.createElement(l.a.Fragment,null,l.a.createElement(j,{countDeals:_.reduce((function(e,t){return t.deals.length+e}),0),filters:W,setFilters:A,initialRoute:V,hash:H,showCity:!1,showLocationTheme:!1}),N?l.a.createElement(q,null):l.a.createElement(l.a.Fragment,null,l.a.createElement(I,{initialRoute:V,hash:H,filters:W,initialFilters:C,setFilters:A,resetFilters:X}),l.a.createElement(T,{deals:_})))))))}));c.a.render(l.a.createElement(i.a,null,l.a.createElement(H,null)),document.getElementById("dealsapp"))}},[[29,1,2]]]);
//# sourceMappingURL=main.085777c3.chunk.js.map