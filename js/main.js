(this.webpackJsonpproto=this.webpackJsonpproto||[]).push([[0],{1:function(e,t,a){e.exports={wrapper:"DealItem_wrapper__2f1kL",wrapperCaption:"DealItem_wrapperCaption__2aqdb",image:"DealItem_image__qHEgN",blur:"DealItem_blur__2rcJ3",blurWrapper:"DealItem_blurWrapper__3V4sF",blurImage:"DealItem_blurImage__2_mJD",location:"DealItem_location__2xFm8",caption:"DealItem_caption__3BgWJ",contentList:"DealItem_contentList__3qBLD",content:"DealItem_content__2ixEz",activeContent:"DealItem_activeContent__2lrap",contentWrap:"DealItem_contentWrap__2G3kI",hotelInformation:"DealItem_hotelInformation__1dwO0",dayNames:"DealItem_dayNames__3cJop",datesWrap:"DealItem_datesWrap__kORdC",dates:"DealItem_dates__y-vrO",hotel:"DealItem_hotel__28JMe",rating:"DealItem_rating__1PBG_",hotelName:"DealItem_hotelName__37NYn",reviewScore:"DealItem_reviewScore__2nc_o",detailsButton:"DealItem_detailsButton__2M8yy",moreOffers:"DealItem_moreOffers__1Jeot",details:"DealItem_details__3qVvB",detailsDate:"DealItem_detailsDate__2RtCY",plane:"DealItem_plane__l4iqa",detailsTime:"DealItem_detailsTime__2YB-h",detailsLanding:"DealItem_detailsLanding__3XEKC",detailsHour:"DealItem_detailsHour__3mExq",line:"DealItem_line__2b6cN",reservation:"DealItem_reservation__ZGPOL",makeReservation:"DealItem_makeReservation__1mAzU",price:"DealItem_price__1l-Bs",priceWrap:"DealItem_priceWrap__1qyfU",orangeStar:"DealItem_orangeStar__3GdzK",greyStar:"DealItem_greyStar__5jSkI",sticky:"DealItem_sticky__3zhS5"}},14:function(e,t,a){e.exports={chipWrap:"style_chipWrap__Exnta",chipContent:"style_chipContent__3Ecys",chip:"style_chip__110tV",chipLabel:"style_chipLabel__3rZ7S"}},16:function(e,t,a){e.exports={formWrap:"Filter_formWrap__ENCfg",form:"Filter_form__1HTVz",results:"Filter_results__32iM2",inputWrap:"Filter_inputWrap__1SQfc",button:"Filter_button__1B6jc"}},17:function(e,t,a){e.exports={App:"App_App__3bDxu",title:"App_title__28Y6X"}},18:function(e,t,a){e.exports={loading:"styles_loading__1kKjp",loadingMobile:"styles_loadingMobile__3IX27",loadingDesktop:"styles_loadingDesktop__2MA_8"}},2:function(e,t,a){e.exports={wrapper:"style_wrapper__10wTO",label:"style_label__2IG4i",activeLabel:"style_activeLabel__FfH7Y",optionList:"style_optionList__XaP8G",optionListWrapper:"style_optionListWrapper__xg1g-",optionListShadow:"style_optionListShadow__2rvTj",optionListItem:"style_optionListItem__IVAAf",optionListItemActive:"style_optionListItemActive__3ae_3",optionListHeader:"style_optionListHeader__38sW0",optionListButtons:"style_optionListButtons__1-e2n",starsWrap:"style_starsWrap__3aS_0",active:"style_active__3tt3Q",button:"style_button__2rVAA",buttonOutline:"style_buttonOutline__23DHS",square:"style_square__1O0wL",searchInput:"style_searchInput__1QPjM",yearsSelect:"style_yearsSelect__38k-T",yearsWrap:"style_yearsWrap__3gVLd",yearList:"style_yearList__1grYj",yearItem:"style_yearItem__2kW6w",right:"style_right__2jxhW",left:"style_left__1ltCn"}},22:function(e,t,a){e.exports={information:"DealsList_information__3YZz8",list:"DealsList_list__1I6DG"}},28:function(e,t,a){e.exports=a(40)},33:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(25),i=a.n(r),c=(a(33),a(12)),s=a(10),o=a(3),u=a(4),m=a(8),f=a.n(m),d=a(6),h=a(17),p=a.n(h),v=a(16),_=a.n(v),b=a(2),E=a.n(b);function g(e,t){return void 0!==t?window.Translator.trans(e,t):window.Translator.trans(e)}var y=function(e){var t=e.position,a=e.label,r=(e.options,e.handleChange),i=(e.defaultValue,e.showSearch),c=(e.activeFirst,e.value),s=e.showVariants,m=e.setShowVariants,f=Object(n.useState)(c),d=Object(u.a)(f,2),h=d[0],p=d[1],v=Object(n.useState)(""),_=Object(u.a)(v,2),b=_[0],y=_[1];Object(n.useEffect)((function(){p(c)}),[c]);var N=Object(n.useRef)(null);return l.a.createElement("div",{className:E.a.wrapper},l.a.createElement("div",{ref:N,className:"".concat(E.a.label," ").concat(s||c.filter((function(e){return e.active})).length>0?E.a.activeLabel:null),onClick:function(){N.current.scrollIntoView({block:"nearest",inline:"center",behavior:"smooth"}),m(!s)}},a),s?l.a.createElement("div",{className:"".concat(E.a.optionListWrapper," ").concat("right"===t?E.a.right:"")},l.a.createElement("div",{className:E.a.optionListHeader},l.a.createElement("span",null,a)," ",l.a.createElement("span",{onClick:function(){r(h.map((function(e){return Object(o.a)({},e,{active:!1})}))),p(h.map((function(e){return Object(o.a)({},e,{active:!1})}))),m(!1)}},g("deals.filter.clearAll"))),i?l.a.createElement("input",{className:E.a.searchInput,type:"text",value:b,onChange:function(e){return y(e.target.value)},placeholder:"Search and select cities for filter"}):null,l.a.createElement("ul",{className:E.a.optionList},h.filter((function(e){return e.label.toLowerCase().includes(b.toLowerCase())})).map((function(e){var t,a=e.value,n=e.label,r=e.active;return l.a.createElement("li",{key:a,className:E.a.optionListItem,onClick:(t=a,function(){p((function(e){return e.map((function(e){return e.value!==t?e:Object(o.a)({},e,{active:!e.active})}))}))})},r?l.a.createElement("div",{className:E.a.optionListItemActive},l.a.createElement("i",{className:"fa fa-check-square","aria-hidden":"true"})):l.a.createElement("div",{className:E.a.square}),l.a.createElement("span",{className:r?E.a.active:""},n))}))),l.a.createElement("div",{className:E.a.optionListButtons},l.a.createElement("button",{className:"".concat(E.a.button," ").concat(E.a.buttonOutline),onClick:function(){return m(!1)}},g("deals.filter.cancel")),l.a.createElement("button",{className:E.a.button,onClick:function(){r(h),m(!1)}},g("deals.filter.done"))),l.a.createElement("div",{className:E.a.optionListShadow,onClick:function(){return m(!1)}})):null)},N=function(e){e.position;var t=e.label,a=e.handleChange,r=(e.defaultValue,e.showSearch,e.value),i=e.showVariants,c=e.setShowVariants,s=Object(n.useState)(r),m=Object(u.a)(s,2),f=m[0],d=m[1];Object(n.useEffect)((function(){d(r)}),[r]);var h=Object(n.useRef)(null);return l.a.createElement("div",{className:E.a.wrapper},l.a.createElement("div",{ref:h,className:"".concat(E.a.label," ").concat(i||r.filter((function(e){return e.active})).length>0?E.a.activeLabel:null),onClick:function(){h.current.scrollIntoView({block:"nearest",inline:"center",behavior:"smooth"}),c(!i)}},t),i?l.a.createElement("div",{className:E.a.optionListWrapper},l.a.createElement("div",{className:E.a.optionListHeader},l.a.createElement("span",null,t)," ",l.a.createElement("span",{onClick:function(){a(f.map((function(e){return Object(o.a)({},e,{active:!1})}))),d(f.map((function(e){return Object(o.a)({},e,{active:!1})}))),c(!1)}},g("deals.filter.clearAll"))),l.a.createElement("ul",{className:E.a.optionList},f.map((function(e){var t,a=e.value,n=e.label,r=e.active;return l.a.createElement("li",{key:a,className:E.a.optionListItem,onClick:(t=a,function(){d((function(e){return e.map((function(e){return e.value!==t?e:Object(o.a)({},e,{active:!e.active})}))}))})},r?l.a.createElement("div",{className:E.a.optionListItemActive},l.a.createElement("i",{className:"fa fa-check-square","aria-hidden":"true"})):l.a.createElement("div",{className:E.a.square}),l.a.createElement("span",{className:r?E.a.active:""},n))}))),l.a.createElement("div",{className:E.a.optionListButtons},l.a.createElement("button",{className:"".concat(E.a.button," ").concat(E.a.buttonOutline),onClick:function(){return c(!1)}},g("deals.filter.cancel")),l.a.createElement("button",{className:E.a.button,onClick:function(){a(f),c(!1)}},g("deals.filter.done"))),l.a.createElement("div",{className:E.a.optionListShadow,onClick:function(){return c(!1)}})):null)},w=function(e){e.position;var t=e.label,a=e.handleChange,r=(e.defaultValue,e.showSearch),i=(e.activeFirst,e.value),c=e.showVariants,s=e.setShowVariants,m=e.hash,f=e.initialRoute,h=e.handleFilterByCity,p=Object(n.useState)(i),v=Object(u.a)(p,2),_=v[0],b=v[1],y=Object(n.useState)(""),N=Object(u.a)(y,2),w=N[0],D=N[1],O=Object(d.f)();Object(n.useEffect)((function(){b(i)}),[i]);var j=Object(n.useRef)(null);return l.a.createElement("div",{className:E.a.wrapper},l.a.createElement("div",{ref:j,className:"".concat(E.a.label," ").concat(c||i.filter((function(e){return e.active})).length>0?E.a.activeLabel:null),onClick:function(){j.current.scrollIntoView({block:"nearest",inline:"center",behavior:"smooth"}),s(!c)}},t),c?l.a.createElement("div",{className:E.a.optionListWrapper},l.a.createElement("div",{className:E.a.optionListHeader},l.a.createElement("span",null,t)," ",l.a.createElement("span",{onClick:function(){a(_.map((function(e){return Object(o.a)({},e,{active:!1})}))),b(_.map((function(e){return Object(o.a)({},e,{active:!1})}))),s(!1)}},g("deals.filter.clearAll"))),r?l.a.createElement("input",{className:E.a.searchInput,type:"text",value:w,onChange:function(e){return D(e.target.value)},placeholder:g("deals.filter.placeholderCities")}):null,l.a.createElement("ul",{className:E.a.optionList},_.filter((function(e){return e.label.toLowerCase().includes(w.toLowerCase())})).map((function(e){var t,a=e.value,n=e.label,r=e.active;return l.a.createElement("li",{key:a,className:E.a.optionListItem,onClick:(t=a,function(){b((function(e){return e.map((function(e){return e.value!==t?e:Object(o.a)({},e,{active:!e.active})}))}))})},r?l.a.createElement("div",{className:E.a.optionListItemActive},l.a.createElement("i",{className:"fa fa-check-square","aria-hidden":"true"})):l.a.createElement("div",{className:E.a.square}),l.a.createElement("span",{className:r?E.a.active:""},n))}))),l.a.createElement("div",{className:E.a.optionListButtons},l.a.createElement("button",{className:"".concat(E.a.button," ").concat(E.a.buttonOutline),onClick:function(){return s(!1)}},g("deals.filter.cancel")),l.a.createElement("button",{className:E.a.button,onClick:function(){if(s(!1),1===_.filter((function(e){return e.active})).length){var e=_.filter((function(e){return e.active}))[0];console.log(e),console.log(h),h(e.value)();var t="/"===f.slice(-1)?"".concat(f).concat(e.value).concat(m):"".concat(f,"/").concat(e.value).concat(m);return O.push(t),null}a(_)}},g("deals.filter.done"))),l.a.createElement("div",{className:E.a.optionListShadow,onClick:function(){return s(!1)}})):null)},D=function(e){var t=e.filters,a=e.setFilters,r=e.countDeals,i=e.hash,c=e.initialRoute,m=e.showCity,f=e.showLocationTheme,d=e.handleFilterByCity,h=Object(n.useRef)(null),p=function(e){return function(t){a((function(a){return Object(o.a)({},a,Object(s.a)({},e,t))}))}},v={cities:!1,airports:!1,themes:!1,hotelStars:!1,dates:!1,nights:!1,preferedVacation:!1,hotelRating:!1},b=Object(n.useState)(v),E=Object(u.a)(b,2),D=E[0],O=E[1],j=function(e){return function(t){O(Object(o.a)({},v,Object(s.a)({},e,t)))}};return Object(n.useEffect)((function(){function e(e){h.current&&!h.current.contains(e.target)&&O(v)}return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[v]),l.a.createElement("div",{className:_.a.formWrap,ref:h},l.a.createElement("form",{className:_.a.form,onSubmit:function(e){return e.preventDefault()}},l.a.createElement("div",{className:_.a.inputWrap},0!==t.cities.length&&m?l.a.createElement(w,{handleChange:p("cities"),label:g("deals.filter.cities"),value:t.cities,showSearch:!0,setShowVariants:j("cities"),showVariants:D.cities,initialRoute:c,hash:i,handleFilterByCity:d}):null,t.airports.length<2?null:l.a.createElement(y,{handleChange:p("airports"),label:g("deals.filter.airport"),value:t.airports,setShowVariants:j("airports"),showVariants:D.airports}),0!==t.themes.length&&f?l.a.createElement(y,{handleChange:p("themes"),label:g("deals.filter.locationTheme"),value:t.themes,setShowVariants:j("themes"),showVariants:D.themes}):null,l.a.createElement(y,{handleChange:p("hotelStars"),label:g("deals.filter.stars"),value:t.hotelStars,setShowVariants:j("hotelStars"),showVariants:D.hotelStars}),l.a.createElement(N,{handleChange:p("dates"),label:g("deals.filter.monthOfTheYear"),value:t.dates,setShowVariants:j("dates"),showVariants:D.dates}),l.a.createElement(y,{handleChange:p("nights"),label:g("deals.filter.nights"),value:t.nights,activeFirst:!0,setShowVariants:j("nights"),showVariants:D.nights}),l.a.createElement(y,{handleChange:p("preferedVacation"),label:g("deals.filter.when"),value:t.preferedVacation,setShowVariants:j("preferedVacation"),showVariants:D.preferedVacation,position:"right"}),l.a.createElement(y,{handleChange:p("hotelRating"),label:g("deals.filter.ratings"),value:t.hotelRating,position:"right",setShowVariants:j("hotelRating"),showVariants:D.hotelRating})),l.a.createElement("div",{className:_.a.results},l.a.createElement("span",null,g("deals.filter.available")),l.a.createElement("span",null,g("deals.filter.results")," ",r))))},O=a(14),j=a.n(O),I=function(e){var t=e.list,a=e.show,n=e.chipLabel,r=e.handleDelete;return a?l.a.createElement("div",{className:j.a.chip},l.a.createElement("span",null,n),t.filter((function(e){return e.active})).map((function(e){var t=e.value,a=e.label;return l.a.createElement("div",{key:t,className:j.a.chipLabel,onClick:function(){return r(t)}},a," ",l.a.createElement("i",{className:"fa fa-times","aria-hidden":"true"}))}))):null},L=function(e){var t=e.filters,a=e.setFilters,n=(e.initialFilters,e.hash),r=e.initialRoute,i=e.resetFilters,c=t.nights,u=t.hotelRating,m=t.preferedVacation,f=t.hotelStars,h=t.cities,p=t.dates,v=t.themes,_=t.airports,b=Object(d.f)(),E=function(e){return function(t){a((function(a){if("from"===e)return Object(o.a)({},a,Object(s.a)({},e,{year:a.from.year,months:a.from.months.map((function(e){return e.value===t?Object(o.a)({},e,{active:!e.active}):e}))}));var l=a[e].map((function(e){return e.value===t?Object(o.a)({},e,{active:!e.active}):e}));if("cities"===e&&0===l.filter((function(e){return e.active})).length){var i="".concat(r).concat(n);b.push(i)}if("cities"===e&&1===l.filter((function(e){return e.active})).length){var c=l.filter((function(e){return e.active}))[0],u="/"===r.slice(-1)?"".concat(r).concat(c.value).concat(n):"".concat(r,"/").concat(c.value).concat(n);b.push(u)}return Object(o.a)({},a,Object(s.a)({},e,l))}))}},y=!1;for(var N in t)y=0!==t[N].filter((function(e){return e.active})).length||y;return l.a.createElement("div",{className:j.a.chipWrap},l.a.createElement("div",{className:j.a.chipContent},y?l.a.createElement("div",{className:j.a.chip},l.a.createElement("div",{className:j.a.chipLabel,onClick:function(){var e="".concat(r).concat(n);b.push(e),i()}},g("deals.chips.clearAll")," ",l.a.createElement("i",{className:"fa fa-times","aria-hidden":"true"}))):null,l.a.createElement(I,{chipLabel:"".concat(g("deals.chips.cities"),":"),list:h,show:0!==h.filter((function(e){return e.active})).length,handleDelete:E("cities")}),l.a.createElement(I,{chipLabel:"".concat(g("deals.chips.nights"),":"),list:c,show:0!==c.filter((function(e){return e.active})).length,handleDelete:E("nights")}),l.a.createElement(I,{chipLabel:"".concat(g("deals.chips.theme"),":"),list:v,show:0!==v.filter((function(e){return e.active})).length,handleDelete:E("themes")}),l.a.createElement(I,{chipLabel:"".concat(g("deals.chips.preferedVacation"),":"),list:m,show:0!==m.filter((function(e){return e.active})).length,handleDelete:E("preferedVacation")}),l.a.createElement(I,{chipLabel:"".concat(g("deals.chips.hotelStars"),":"),list:f,show:0!==f.filter((function(e){return e.active})).length,handleDelete:E("hotelStars")}),l.a.createElement(I,{chipLabel:"".concat(g("deals.chips.airports"),":"),list:_,show:0!==_.filter((function(e){return e.active})).length,handleDelete:E("airports")}),l.a.createElement(I,{chipLabel:"".concat(g("deals.chips.dates"),":"),list:p,show:0!==p.filter((function(e){return e.active})).length,handleDelete:E("dates")}),l.a.createElement(I,{chipLabel:"".concat(g("deals.chips.hotelRating"),":"),list:u,show:0!==u.filter((function(e){return e.active})).length,handleDelete:E("hotelRating")})))},C=a(1),S=a.n(C);function k(e,t){var a,n,l,r,i,c,s;switch(s=parseInt(Math.floor(e/1e3)),c=parseInt(Math.floor(s/60)),i=parseInt(Math.floor(c/60)),a=parseInt(Math.floor(i/24)),r=parseInt(s%60),l=parseInt(c%60),n=parseInt(i%24),t){case"s":return s;case"m":return c;case"h":return i;case"d":return a;default:return{d:a,h:n,m:l,s:r}}}var F={translatedMonths:[g("deals.months.January"),g("deals.months.February"),g("deals.months.March"),g("deals.months.April"),g("deals.months.May"),g("deals.months.June"),g("deals.months.July"),g("deals.months.August"),g("deals.months.September"),g("deals.months.October"),g("deals.months.November"),g("deals.months.December")],translatedDays:[g("deals.months.Sunday"),g("deals.months.Monday"),g("deals.months.Tuesday"),g("deals.months.Wednesday"),g("deals.months.Thursday"),g("deals.months.Friday"),g("deals.months.Saturday")]},V=function(e){var t=e.deal,a=Object(n.useState)(!1),r=Object(u.a)(a,2),i=(r[0],r[1],t.hotelData),c=t.flightData,s=t.dealData;c||((c={}).default_inbound={},console.log(c,s.price));for(var o=c,m=(o.takeoff_date,o.takeoff_hour),f=o.landing_hour,d=(o.landing_date,o.travel_duration_format),h=o.default_inbound,p=o.nb_escales,v=o.city_from_airport_code,_=o.city_to_airport_code,b=(o.comp_logo,o.comp_path,c.default_inbound),E=(b.takeoff_date,b.takeoff_hour),y=b.landing_hour,N=(b.landing_date,b.travel_duration_format),w=b.city_from_airport_code,D=b.city_to_airport_code,O=(b.comp_logo,b.comp_path,s.outboundDate),j=s.inboundDate,I=s.price,L=i.rating,C=i.name,V=i.trustYouReviews,W=(i.default_img,[]),R=1;R<=5;R++)R<=L?W.push(l.a.createElement("div",{className:S.a.orangeStar,key:R},l.a.createElement("i",{className:"fa fa-star"}))):W.push(l.a.createElement("div",{className:S.a.greyStar,key:R},l.a.createElement("i",{className:"fa fa-star"})));var M=function(e){return new Date(+e[2],+e[1]-1,+e[0])},A=M(O.split("/")),B=M(j.split("/")),x=k(B-A,"d"),Y=("".concat(A.getDate(),". ").concat(F.translatedMonths[A.getMonth()]," ").concat(A.getFullYear()),"".concat(B.getDate(),". ").concat(F.translatedMonths[B.getMonth()]," ").concat(B.getFullYear()),F.translatedDays[A.getDay()]),T=F.translatedDays[B.getDay()];return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:S.a.content},l.a.createElement("div",{className:S.a.contentWrap},l.a.createElement("div",{className:S.a.hotelInformation},l.a.createElement("div",{className:S.a.datesWrap},l.a.createElement("span",null,l.a.createElement("span",{className:S.a.dayNames},Y,"-",T,","),x," ",g("deals.dealContent.nights")),l.a.createElement("p",{className:S.a.dates},O," - ",j)),l.a.createElement("i",{className:"fa fa-bed ".concat(S.a.hotel),"aria-hidden":"true"}),l.a.createElement("div",{className:S.a.rating},W.reverse()),l.a.createElement("span",{className:S.a.hotelName},C),l.a.createElement("div",{className:S.a.reviewScore},5===V.reviewScore?l.a.createElement("span",null,g("deals.dealContent.best")):4===V.reviewScore?l.a.createElement("span",null,g("deals.dealContent.excelent")):l.a.createElement("span",null,g("deals.dealContent.good"))," ",l.a.createElement("span",null,"(",V.reviewCount," ",g("deals.dealContent.reviews"),")")," ",l.a.createElement("span",null,V.reviewScore,"/5")))),1===Object.values(c).length?null:l.a.createElement("div",{className:S.a.details},l.a.createElement("i",{className:"fa fa-plane ".concat(S.a.plane),"aria-hidden":"true"}),l.a.createElement("div",{className:S.a.detailsDate},l.a.createElement("span",null,g("deals.dealContent.outboundFlight"))),l.a.createElement("div",{className:S.a.detailsTime},l.a.createElement("div",{className:S.a.detailsLanding},l.a.createElement("span",null,f," (",_,")")),l.a.createElement("div",{className:S.a.detailsHour},l.a.createElement("span",null,d.toLowerCase(),"m"),l.a.createElement("div",null,l.a.createElement("i",{className:"fa fa-map-marker","aria-hidden":"true"}),l.a.createElement("div",{className:S.a.line}),l.a.createElement("i",{className:"fa fa-sort-desc","aria-hidden":"true"})),l.a.createElement("span",null,0===+p?g("deals.dealContent.directFlight"):"".concat(+p," ").concat(g("deals.dealContent.stops")))),l.a.createElement("div",{className:S.a.detailsLanding},l.a.createElement("span",null,m," (",v,")"))),l.a.createElement("div",{className:S.a.detailsDate},l.a.createElement("span",null,g("deals.dealContent.inboundFlight"))),l.a.createElement("div",{className:S.a.detailsTime},l.a.createElement("div",{className:S.a.detailsLanding},l.a.createElement("span",null,y," (",w,")")),l.a.createElement("div",{className:S.a.detailsHour},l.a.createElement("span",null,N.toLowerCase(),"m"),l.a.createElement("div",null,l.a.createElement("i",{className:"fa fa-map-marker","aria-hidden":"true"}),l.a.createElement("div",{className:S.a.line}),l.a.createElement("i",{className:"fa fa-sort-desc","aria-hidden":"true"})),l.a.createElement("span",null,0===+h.nb_escales?g("deals.dealContent.directFlight"):"".concat(+p," ").concat(g("deals.dealContent.stops")))),l.a.createElement("div",{className:S.a.detailsLanding},l.a.createElement("span",null,E," (",D,")")))),l.a.createElement("div",{className:S.a.reservation},l.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:s.packageDeeplinkUrl,className:S.a.makeReservation},g("deals.dealContent.reservation")),l.a.createElement("div",{className:S.a.price},l.a.createElement("span",null,g("deals.dealContent.from")),l.a.createElement("div",{className:S.a.priceWrap},l.a.createElement("span",null,g("deals.dealContent.perPerson")),l.a.createElement("span",null,"$",I))))))},W=function(e){var t=e.deals,a=e.hash,n=e.initialRoute,r=e.handleFilterByCity,i=t.cityPhoto,s=t.cityName,o=t.cityId,u="/"===n.slice(-1)?"".concat(n).concat(o).concat(a):"".concat(n,"/").concat(o).concat(a);return l.a.createElement("div",{className:S.a.wrapper},l.a.createElement("div",{className:S.a.sticky},l.a.createElement("img",{src:i,alt:"city",className:S.a.image}),l.a.createElement("div",{className:S.a.blurWrapper},l.a.createElement("div",{className:S.a.blur},l.a.createElement("img",{src:i,alt:"city",className:S.a.blurImage}))),l.a.createElement("p",{className:S.a.caption},s,l.a.createElement("span",{className:S.a.location},l.a.createElement("i",{className:"fa fa-map-marker"}))),l.a.createElement("div",{className:S.a.wrapperCaption},l.a.createElement("span",null,t.deals.length)," ",g("deals.dealItem.deals"))),l.a.createElement("div",{className:S.a.contentList},t.deals.slice(0,2).map((function(e,t){return l.a.createElement(V,{key:e.dealData.dealId,deal:e})}))),t.deals.length>3?l.a.createElement(c.b,{to:u,className:S.a.moreOffers,onClick:r(o)},g("deals.dealItem.moreOffers")):"")},R=function(e){return e.deals.deals.map((function(e,t){var a=e.hotelData,n=a.name,r=a.default_img;return l.a.createElement("div",{key:t,className:S.a.wrapper},l.a.createElement("img",{src:r.url_medium,alt:"hotel photo",className:S.a.image}),l.a.createElement("div",{className:S.a.blurWrapper},l.a.createElement("div",{className:S.a.blur},l.a.createElement("img",{src:r.url_medium,alt:"hotel photo",className:S.a.blurImage}))),l.a.createElement("p",{className:S.a.caption},l.a.createElement("span",null," ",n),l.a.createElement("span",{className:S.a.location},l.a.createElement("i",{className:"fa fa-map-marker"}))),l.a.createElement("div",{className:S.a.contentList},l.a.createElement(V,{deal:e})))}))},M=a(22),A=a.n(M),B=function(e){var t=e.deals,a=e.cityDeal,n=e.hash,r=e.initialRoute,i=e.handleFilterByCity;return l.a.createElement("div",{className:A.a.list},0===t.length?l.a.createElement("h5",{className:A.a.information},g("deals.dealList.noFlights"),"."):t.map((function(e,t){return a?l.a.createElement(R,{key:t,deals:e}):l.a.createElement(W,{handleFilterByCity:i,initialRoute:r,key:t,deals:e,hash:n})})))};var x=function(e){var t=e.deals,a=Object(d.h)().city,n=t.filter((function(e){return a.split("-").some((function(t){return+t===e.cityId}))}));return l.a.createElement("div",null,n.length>0?l.a.createElement("h3",{className:p.a.title},g("deals.cityDeals.resultFor")," ",n[0].cityName):null,l.a.createElement(B,{deals:n,cityDeal:!0}))},Y=a(18),T=a.n(Y),q=function(){return l.a.createElement("div",{className:T.a.loading},l.a.createElement("img",{className:T.a.loadingDesktop,src:"https://d16tr0byigrcd.cloudfront.net/images/package-loader.gif",alt:"loading"}),l.a.createElement("img",{className:T.a.loadingMobile,src:"https://d16tr0byigrcd.cloudfront.net/images/package-loader.gif",alt:"loading"}))};console.log(F);var H=Object(d.i)((function(e){var t=Object(n.useState)([]),a=Object(u.a)(t,2),r=a[0],i=a[1],m=Object(n.useState)([]),h=Object(u.a)(m,2),v=h[0],_=h[1],b=Object(n.useState)([]),E=Object(u.a)(b,2),g=E[0],y=E[1],N=Object(n.useState)(!0),w=Object(u.a)(N,2),O=w[0],j=w[1],I=Object(d.f)(),C=Object(d.g)(),S={nights:[{value:2,label:"2+",active:!1},{value:3,label:"3+",active:!1},{value:4,label:"4+",active:!1},{value:5,label:"5+",active:!1},{value:6,label:"6+",active:!1},{value:7,label:"7",active:!1}],hotelRating:[{value:3,label:"3+",active:!1},{value:4,label:"4+",active:!1},{value:5,label:"5+",active:!1}],preferedVacation:[{value:0,label:"Weekends",active:!1},{value:1,label:"Summer holiday",active:!1},{value:2,label:"Holidays break",active:!1}],hotelStars:[{value:3,label:"3+",active:!1},{value:4,label:"4+",active:!1},{value:5,label:"5+",active:!1}],cities:[],dates:[],themes:[],airports:[]},V=window.location.pathname,W=V.split("/");parseInt(W[W.length-1])&&(V=W.slice(0,W.length-1).join("/")||"/"),V="/"===V.slice(-1)?V:V+"/";var R=Object(n.useState)(V),M=Object(u.a)(R,2),A=M[0],Y=(M[1],Object(n.useState)(S)),T=Object(u.a)(Y,2),H=T[0],J=T[1],G=Object(n.useState)(C.hash),P=Object(u.a)(G,2),z=P[0],U=P[1],X=Object(n.useState)(!0),K=Object(u.a)(X,2),Q=K[0],Z=K[1],$=function(e){return function(){J((function(t){return Object(o.a)({},t,{cities:t.cities.map((function(t){var a=t.value,n=t.label;return a===e?{label:n,active:!0,value:a}:{label:n,active:!1,value:a}}))})}))}},ee=function(){J((function(e){var t={};for(var a in e)"from"!==a?t[a]=e[a].map((function(e){return Object(o.a)({},e,{active:!1})})):t.from={year:S.from.year,months:S.from.months.map((function(e){return Object(o.a)({},e,{active:!1})}))};return t}))};return Object(n.useEffect)((function(){fetch("./api.php").then((function(e){return e.json()})).then((function(e){_(e.specialDates),i(e.items),j(!1)}))}),[]),Object(n.useEffect)((function(){if(0!==r.length){var e=r.filter((function(e){if(0===H.themes.filter((function(e){return e.active})).length)return e;var t=e.themes,a=[];for(var n in t)a.push({value:+n,label:t[n]});return H.themes.filter((function(e){return e.active})).some((function(e){var t=e.value;return a.some((function(e){return e.value===t}))}))})).map((function(e){return Object(o.a)({},e,{deals:e.deals.filter((function(e){if(0===H.airports.filter((function(e){return e.active})).length)return e;var t=e.flightData.city_from_airport_code;return H.airports.filter((function(e){return e.active})).some((function(e){var a=e.value;return t===a}))}))})})).map((function(e){return Object(o.a)({},e,{deals:e.deals.filter((function(e){var t=e.hotelData;return 0===H.hotelStars.filter((function(e){return e.active})).length?e:H.hotelStars.filter((function(e){return e.active})).some((function(e){return e.value<=t.rating}))}))})})).map((function(e){return Object(o.a)({},e,{deals:e.deals.filter((function(e){var t=e.hotelData;return 0===H.hotelRating.filter((function(e){return e.active})).length?e:H.hotelRating.filter((function(e){return e.active})).some((function(e){return e.value<=t.trustYouReviews.reviewScore}))}))})})).map((function(e){return Object(o.a)({},e,{deals:e.deals.filter((function(e){if(0===H.nights.filter((function(e){return e.active})).length)return e;var t=e.dealData,a=t.outboundDate,n=t.inboundDate,l=function(e){return new Date(+e[2],+e[1]-1,+e[0])},r=l(a.split("/")),i=k(l(n.split("/"))-r,"d");return H.nights.filter((function(e){return e.active})).some((function(e){return e.value<=i}))}))})})).filter((function(e){return 0===H.cities.filter((function(e){return e.active})).length?e:H.cities.filter((function(e){return e.active})).some((function(t){return t.value===e.cityId}))})).map((function(e){return Object(o.a)({},e,{deals:e.deals.filter((function(e){if(0===H.preferedVacation.filter((function(e){return e.active})).length)return e;var t=e.dealData,a=t.outboundDate,n=(t.inboundDate,function(e){return new Date(+e[2],+e[1]-1,+e[0])}),l=n(a.split("/"));return H.preferedVacation.filter((function(e){return e.active})).some((function(e){var t=e.from_date,a=e.to_date,r=n(a.split("/")),i=n(t.split("/"));return console.log(f()(l)<f()(r)&&f()(l)>f()(i)),f()(l)<f()(r)&&f()(l)>f()(i)}))}))})})).map((function(e){return Object(o.a)({},e,{deals:e.deals.filter((function(e){var t,a=e.dealData.outboundDate,n=(t=a.split("/"),new Date(+t[2],+t[1]-1,+t[0]));return H.dates.some((function(e){e.label;var t=e.value,a=e.active;if(0===H.dates.filter((function(e){return e.active})).length)return!0;if(a){var l=f()(t);return l.format("MMMM")===f()(n).format("MMMM")&&l.format("YYYY")===f()(n).format("YYYY")}}))}))})})).filter((function(e){return e.deals.length>0}));y(e)}}),[H,r]),Object(n.useEffect)((function(){var e=r.map((function(e){var t=e.cityName;return{value:e.cityId,label:t,active:!1}})),t=r.map((function(e){return e.deals})).flat().filter((function(e){return e.flightData})).map((function(e){var t=e.flightData;return{value:t.city_from_airport_code,label:t.city_from_airport}})),a=[],n=new Map,l=!0,i=!1,c=void 0;try{for(var u,m=t[Symbol.iterator]();!(l=(u=m.next()).done);l=!0){var f=u.value;n.has(f.value)||(n.set(f.value,!0),a.push({value:f.value,label:f.label,active:!1}))}}catch(V){i=!0,c=V}finally{try{l||null==m.return||m.return()}finally{if(i)throw c}}var d=r.map((function(e){return e.deals})).flat().map((function(e){var t,a=e.dealData.outboundDate,n=(t=a.split("/"),new Date(+t[2],+t[1]-1,+t[0]));n.setDate(1);var l="".concat(F.translatedMonths[n.getMonth()],", ").concat(n.getFullYear());return{value:n,label:l=l.charAt(0).toUpperCase()+l.slice(1)}})).sort((function(e,t){return e.value-t.value})),h=[],p=new Map,_=!0,b=!1,E=void 0;try{for(var g,y=d[Symbol.iterator]();!(_=(g=y.next()).done);_=!0){var N=g.value;p.has(N.label)||(p.set(N.label,!0),h.push({value:N.value,label:N.label,active:!1}))}}catch(V){b=!0,E=V}finally{try{_||null==y.return||y.return()}finally{if(b)throw E}}var w=r.map((function(e){return e.themes})),D=[];w.forEach((function(e){var t=function(t){if(D.some((function(e){return e.value===+t})))return{v:void 0};D.push({value:+t,label:e[t],active:!1})};for(var a in e){var n=t(a);if("object"===typeof n)return n.v}}));var O=v.map((function(e){var t=e.name,a=e.from_date,n=e.to_date;return{label:t,active:!1,from_date:a,to_date:n,value:a+n}})),j=Object(o.a)({},H,{themes:D,cities:e,airports:a,dates:h,preferedVacation:O});if(!C.hash)return J(Object(o.a)({},H,{},j));var I=C.hash.slice(1).split("&").reduce((function(e,t){var a=t.split("=");return Object(o.a)({},e,Object(s.a)({},a[0],a[1].split(",")))}),{}),L={},S=function(e){var t=j[e],a=I[e];if(I.hasOwnProperty(e)){if("dates"===e)return L[e]=t.map((function(e){return a.some((function(t){return+e.value===+t}))?Object(o.a)({},e,{active:!0}):e})),"continue";if(isNaN(+a[0]))return L[e]=t.map((function(e){return a.some((function(t){return e.value===t}))?Object(o.a)({},e,{active:!0}):e})),"continue";L[e]=t.map((function(e){return a.some((function(t){return e.value===+t}))?Object(o.a)({},e,{active:!0}):e}))}};for(var k in j)S(k);J(Object(o.a)({},H,{},j,{},L))}),[r,C.hash]),Object(n.useEffect)((function(){if(0!==H.cities.length){var e="#";for(var t in H)"dates"!==t?H[t].length>0&&H[t].filter((function(e){return e.active})).length>0&&(e="".concat(e).concat(t,"=").concat(H[t].filter((function(e){return e.active})).map((function(e){return e.value})).join(","),"&")):H[t].filter((function(e){return e.active})).length>0&&(e="".concat(e,"dates=").concat(H[t].filter((function(e){return e.active})).map((function(e){return+e.value})).join(","),"&"));if(e=e.slice(0,e.length-1),1===H.cities.filter((function(e){return e.active})))return null;U(e)}}),[H]),Object(n.useEffect)((function(){if(1===H.cities.filter((function(e){return e.active})).length){var e=H.cities.filter((function(e){return e.active}))[0],t="/"===A.slice(-1)?"".concat(A).concat(e.value).concat(z):"".concat(A,"/").concat(e.value).concat(z);I.replace(t)}else if(0===H.cities.filter((function(e){return e.active})).length){if(Q)return Z(!1);var a="".concat(A).concat(z);I.replace(a)}else setTimeout((function(){return I.replace(C.pathname+z)}),5)}),[z]),l.a.createElement("div",{className:p.a.App},l.a.createElement(c.a,null,l.a.createElement(d.c,null,l.a.createElement(d.a,{path:A,exact:!0},l.a.createElement(l.a.Fragment,null,l.a.createElement(D,{countDeals:g.reduce((function(e,t){return t.deals.length+e}),0),filters:H,setFilters:J,initialRoute:A,hash:z,showCity:!0,showLocationTheme:!0,handleFilterByCity:$}),O?l.a.createElement(q,null):l.a.createElement(l.a.Fragment,null,l.a.createElement(L,{initialRoute:A,hash:z,filters:H,initialFilters:S,setFilters:J,resetFilters:ee}),l.a.createElement(B,{handleFilterByCity:$,initialRoute:A,deals:g,hash:z})))),l.a.createElement(d.a,{path:A+":city"},l.a.createElement(l.a.Fragment,null,l.a.createElement(D,{countDeals:g.reduce((function(e,t){return t.deals.length+e}),0),filters:H,setFilters:J,initialRoute:A,hash:z,showCity:!1,showLocationTheme:!1}),O?l.a.createElement(q,null):l.a.createElement(l.a.Fragment,null,l.a.createElement(L,{initialRoute:A,hash:z,filters:H,initialFilters:S,setFilters:J,resetFilters:ee}),l.a.createElement(x,{deals:g})))))))}));i.a.render(l.a.createElement(c.a,null,l.a.createElement(H,null)),document.getElementById("dealsapp"))}},[[28,1,2]]]);
//# sourceMappingURL=main.d02a39fa.chunk.js.map